<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Oren Bochman">
<meta name="dcterms.date" content="2016-02-16">

<title>Oren Bochman‚Äôs Blog - Lesson 22 Diagnosis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script> 
  
<style>html{ scroll-behavior: smooth; }</style>
<style>

      .quarto-title-block .quarto-title-banner {
        background-image: url(banner_black_3.jpg);
background-size: cover;
      }
</style>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css">

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<meta name="twitter:title" content="Oren Bochman‚Äôs Blog - Lesson 22 Diagnosis">
<meta name="twitter:description" content="Knowlede-Based AI ‚Äî Cognitive Systems">
<meta name="twitter:image" content="https://orenbochman.github.io/blog/notes/cognitivie-ai-cs7637/22-diagnosis/nlp-brain-wordcloud.jpg">
<meta name="twitter:creator" content="@orenbochman">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../images/logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Oren Bochman‚Äôs Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-book" role="button" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-book" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-bi-book">    
        <li>
    <a class="dropdown-item" href="../../../dnn.html">
 <span class="dropdown-text">Neural Networks for Machine Learning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../model-thinking.html">
 <span class="dropdown-text">Model Thinking</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../xai.html">
 <span class="dropdown-text">XAI</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../rl.html">
 <span class="dropdown-text">rl</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../rhetoric.html">
 <span class="dropdown-text">rhetoric</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../tfp.html">
 <span class="dropdown-text">TFP</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../ab-testing.html">
 <span class="dropdown-text">AB testing</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../cognitiveai.html">
 <span class="dropdown-text">cognitive AI</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/orenbochman"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-github" role="button" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-bi-github">    
        <li>
    <a class="dropdown-item" href="https://github.com/OrenBochman/blog">
 <span class="dropdown-text">Source Code</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/OrenBochman/blog/issues">
 <span class="dropdown-text">Report a Bug</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="../../../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../archive.html"> <i class="bi bi-archive" role="img">
</i> 
<span class="menu-text">Archive</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Lesson 22 Diagnosis</h1>
            <p class="subtitle lead">Knowlede-Based AI ‚Äî Cognitive Systems</p>
                                <div class="quarto-categories">
                <div class="quarto-category">notes</div>
                <div class="quarto-category">KB-AI</div>
                <div class="quarto-category">diagnosis</div>
                <div class="quarto-category">abductive reasoning</div>
                <div class="quarto-category">heuristic classification</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Oren Bochman </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 16, 2016</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#sec-preview" id="toc-sec-preview" class="nav-link active" data-scroll-target="#sec-preview">Preview</a></li>
  <li><a href="#sec-exercise-diagnosing-illness" id="toc-sec-exercise-diagnosing-illness" class="nav-link" data-scroll-target="#sec-exercise-diagnosing-illness">Exercise Diagnosing Illness</a>
  <ul class="collapse">
  <li><a href="#sec-defining-diagnosis" id="toc-sec-defining-diagnosis" class="nav-link" data-scroll-target="#sec-defining-diagnosis">Defining Diagnosis</a></li>
  <li><a href="#sec-data-space-and-hypothesis-space" id="toc-sec-data-space-and-hypothesis-space" class="nav-link" data-scroll-target="#sec-data-space-and-hypothesis-space">Data Space and Hypothesis Space</a></li>
  <li><a href="#sec-problems-with-diagnosis-as-classification" id="toc-sec-problems-with-diagnosis-as-classification" class="nav-link" data-scroll-target="#sec-problems-with-diagnosis-as-classification">Problems with Diagnosis as Classification</a></li>
  <li><a href="#sec-deduction-induction-abduction" id="toc-sec-deduction-induction-abduction" class="nav-link" data-scroll-target="#sec-deduction-induction-abduction">Deduction, Induction, Abduction</a></li>
  <li><a href="#sec-criteria-for-choosing-a-hypothesis" id="toc-sec-criteria-for-choosing-a-hypothesis" class="nav-link" data-scroll-target="#sec-criteria-for-choosing-a-hypothesis">Criteria for Choosing a Hypothesis</a></li>
  <li><a href="#sec-exercise-diagnosis-as-abduction" id="toc-sec-exercise-diagnosis-as-abduction" class="nav-link" data-scroll-target="#sec-exercise-diagnosis-as-abduction">Exercise Diagnosis as Abduction</a></li>
  <li><a href="#sec-completing-the-process" id="toc-sec-completing-the-process" class="nav-link" data-scroll-target="#sec-completing-the-process">Completing the Process</a></li>
  <li><a href="#sec-assignment-diagnosis" id="toc-sec-assignment-diagnosis" class="nav-link" data-scroll-target="#sec-assignment-diagnosis">Assignment Diagnosis</a></li>
  <li><a href="#sec-wrap-up" id="toc-sec-wrap-up" class="nav-link" data-scroll-target="#sec-wrap-up">Wrap Up</a></li>
  <li><a href="#sec-the-cognitive-connection" id="toc-sec-the-cognitive-connection" class="nav-link" data-scroll-target="#sec-the-cognitive-connection">The Cognitive Connection</a></li>
  <li><a href="#sec-deep-rl--bayesian-learning" id="toc-sec-deep-rl--bayesian-learning" class="nav-link" data-scroll-target="#sec-deep-rl--bayesian-learning">Deep RL &amp; Bayesian Learning</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">





<section id="sec-preview" class="level2">
<h2 class="anchored" data-anchor-id="sec-preview">Preview</h2>
<p>In this lesson we cover <strong>diagnosis</strong>, which is the identification of the fault or faults responsible for a malfunctioning system.</p>
<p>The system could be a car, a computer program, an organism, or the economy.</p>
<p>Diagnosis builds on our discussion of <a href="../11-classification/11-classification.html">classification</a> and <a href="../21-configuration/21-configuration.html">configuration</a></p>
<p>We will start by defining <strong>diagnosis</strong>. From there we will proceed to setup two spaces: A data spaces and a hypothesis space to collect data on the malfunctioning system. The goal being to generate hypothesis for the fault that can explain th system malfunction. <mark>We will construct <strong>mappings</strong> from data space to hypothesis space which amount to diagnosis. We‚Äôll present two views of diagnosis, diagnosis as <em>classification</em> and diagnosis as <em>abduction</em></mark>. <strong>Abduction</strong> in this context is a new form of reasoning which we shall discuss greater detail.</p>
</section>
<section id="sec-exercise-diagnosing-illness" class="level1 page-columns page-full">
<h1>Exercise Diagnosing Illness</h1>
<p>The philosopher Plato greatly admired doctors‚Äô ability to diagnose illnesses and considered it a template for many other complex reasoning tasks. When we think of diagnosis, most of us think in terms of medical diagnosis i.e.&nbsp;the kind of diagnosis a doctor does.</p>

<div class="no-row-height column-margin column-container"><div id="fig-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="image01.webp" class="lightbox" data-gallery="quarto-lightbox-gallery-1" data-glightbox="description: .lightbox-desc-1" title="medical diagnosis"><img src="image01.webp" class="img-fluid figure-img"></a></p>
<figcaption>medical diagnosis</figcaption>
</figure>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1
</figcaption>
</figure>
</div><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ex1.webp" class="lightbox" data-gallery="quarto-lightbox-gallery-2" data-glightbox="description: .lightbox-desc-2" title="Exercise"><img src="ex1.webp" class="img-fluid figure-img" alt="Exercise"></a></p>
<figcaption>Exercise</figcaption>
</figure>
</div></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Diagnosis MVP<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>
</div>
</div>
<div class="callout-body-container callout-body">
<p>This lesson is motivated by a made up diagnostic exercise.</p>
<p>I felt this course rather metaphysical as the instructors seem to avoid with the realities of implementations of the concepts. They tend to give the KR and algorithms human like capabilities. This is a problem of some other courses to and eventual, I decide to start to supplement my notes with MVPs that will help to ground my understanding in a implementation context.</p>
<p>From this diagnostic exercise I realized:</p>
<ol type="1">
<li>how to represent the data</li>
<li>how to implement a basic diagnostic</li>
<li>it handles edge cases: 1.1. it finds the closest diagnosis 1.2. if there are several it will list them all</li>
<li>Further work</li>
<li>Since the MVP solved the problem I did not add the ability to consider cases where two or more illnesses are required for the diagnosis of a patient.</li>
<li>Later in the lesson more sophisticated tree based diagnostics are presented. Since taking this course I learned about CI<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>, XAI<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> and CFX<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>. It would seem instructive to attempt an MVP for tree based explanation, possibly based on using probabilistic counterfactuals examples.</li>
<li>I think the KR could have been reduced to a vector and the alg to a dot product. But I wanted to keep my KR faithful to the problem</li>
</ol>
</div>
</div>
<p>This following is an MVP for solving the exercise.</p>
<div id="medical-diagnosis---the-problem" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>verbose <span class="op">=</span> <span class="va">True</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># KR for the patient</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>letters <span class="op">=</span> [<span class="bu">chr</span>(i) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">ord</span>(<span class="st">'a'</span>), <span class="bu">ord</span>(<span class="st">'h'</span>) <span class="op">+</span> <span class="dv">1</span>)]</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>patient <span class="op">=</span> {k:v <span class="cf">for</span> (k,v) <span class="kw">in</span> <span class="bu">zip</span>(letters ,(<span class="dv">0</span>,<span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>))}</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> verbose:</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(patient)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># KR for the maladies</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>maladies  <span class="op">=</span> {}</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>maladies[<span class="st">'Alphatis'</span>]     <span class="op">=</span> {<span class="st">'a'</span>: <span class="dv">1</span>, <span class="st">'b'</span>: <span class="dv">0</span>, <span class="st">'c'</span>:<span class="op">-</span><span class="dv">1</span>, <span class="st">'d'</span>: <span class="dv">0</span>, <span class="st">'e'</span>: <span class="dv">0</span>, <span class="st">'f'</span>: <span class="dv">1</span>, <span class="st">'g'</span>: <span class="dv">0</span>, <span class="st">'h'</span>: <span class="dv">0</span>}</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>maladies[<span class="st">'Betatosis'</span>]    <span class="op">=</span> {<span class="st">'a'</span>: <span class="dv">0</span>, <span class="st">'b'</span>: <span class="dv">1</span>, <span class="st">'c'</span>:<span class="op">-</span><span class="dv">1</span>, <span class="st">'d'</span>: <span class="dv">0</span>, <span class="st">'e'</span>: <span class="dv">1</span>, <span class="st">'f'</span>: <span class="dv">0</span>, <span class="st">'g'</span>: <span class="dv">0</span>, <span class="st">'h'</span>:<span class="op">-</span><span class="dv">1</span>}</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>maladies[<span class="st">'Gammonoma'</span>]    <span class="op">=</span> {<span class="st">'a'</span>: <span class="dv">0</span>, <span class="st">'b'</span>: <span class="dv">0</span>, <span class="st">'c'</span>: <span class="dv">0</span>, <span class="st">'d'</span>: <span class="dv">1</span>, <span class="st">'e'</span>: <span class="dv">1</span>, <span class="st">'f'</span>: <span class="dv">1</span>, <span class="st">'g'</span>: <span class="dv">0</span>, <span class="st">'h'</span>: <span class="dv">0</span>}</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>maladies[<span class="st">'Deltacol'</span>]     <span class="op">=</span> {<span class="st">'a'</span>: <span class="dv">0</span>, <span class="st">'b'</span>: <span class="dv">0</span>, <span class="st">'c'</span>: <span class="dv">0</span>, <span class="st">'d'</span>: <span class="dv">0</span>, <span class="st">'e'</span>: <span class="dv">0</span>, <span class="st">'f'</span>: <span class="dv">0</span>, <span class="st">'g'</span>: <span class="dv">0</span>, <span class="st">'h'</span>: <span class="dv">0</span>}</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>maladies[<span class="st">'Epsicusus'</span>]    <span class="op">=</span> {<span class="st">'a'</span>: <span class="dv">0</span>, <span class="st">'b'</span>: <span class="dv">0</span>, <span class="st">'c'</span>: <span class="dv">0</span>, <span class="st">'d'</span>: <span class="dv">0</span>, <span class="st">'e'</span>: <span class="dv">0</span>, <span class="st">'f'</span>: <span class="dv">0</span>, <span class="st">'g'</span>: <span class="dv">0</span>, <span class="st">'h'</span>:<span class="op">-</span><span class="dv">1</span>}</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>maladies[<span class="st">'Zetad'</span>]        <span class="op">=</span> {<span class="st">'a'</span>: <span class="dv">0</span>, <span class="st">'b'</span>: <span class="dv">1</span>, <span class="st">'c'</span>:<span class="op">-</span><span class="dv">1</span>, <span class="st">'d'</span>: <span class="dv">0</span>, <span class="st">'e'</span>:<span class="op">-</span><span class="dv">1</span>, <span class="st">'f'</span>:<span class="op">-</span><span class="dv">1</span>, <span class="st">'g'</span>: <span class="dv">0</span>, <span class="st">'h'</span>: <span class="dv">0</span>}</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>maladies[<span class="st">'Etamia'</span>]       <span class="op">=</span> {<span class="st">'a'</span>: <span class="dv">1</span>, <span class="st">'b'</span>: <span class="dv">0</span>, <span class="st">'c'</span>: <span class="dv">0</span>, <span class="st">'d'</span>:<span class="op">-</span><span class="dv">1</span>, <span class="st">'e'</span>: <span class="dv">0</span>, <span class="st">'f'</span>: <span class="dv">0</span>, <span class="st">'g'</span>: <span class="dv">0</span>, <span class="st">'h'</span>:<span class="op">-</span><span class="dv">1</span>}</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>maladies[<span class="st">'Thetadesis'</span>]   <span class="op">=</span> {<span class="st">'a'</span>: <span class="dv">0</span>, <span class="st">'b'</span>: <span class="dv">1</span>, <span class="st">'c'</span>:<span class="op">-</span><span class="dv">1</span>, <span class="st">'d'</span>: <span class="dv">0</span>, <span class="st">'e'</span>: <span class="dv">0</span>, <span class="st">'f'</span>: <span class="dv">0</span>, <span class="st">'g'</span>: <span class="dv">0</span>, <span class="st">'h'</span>:<span class="op">-</span><span class="dv">1</span>}</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>maladies[<span class="st">'Iotaglia'</span>]     <span class="op">=</span> {<span class="st">'a'</span>: <span class="dv">1</span>, <span class="st">'b'</span>: <span class="dv">0</span>, <span class="st">'c'</span>: <span class="dv">0</span>, <span class="st">'d'</span>: <span class="dv">0</span>, <span class="st">'e'</span>:<span class="op">-</span><span class="dv">1</span>, <span class="st">'f'</span>: <span class="dv">1</span>, <span class="st">'g'</span>: <span class="dv">1</span>, <span class="st">'h'</span>: <span class="dv">0</span>}</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>maladies[<span class="st">'Kappacide'</span>]    <span class="op">=</span> {<span class="st">'a'</span>:<span class="op">-</span><span class="dv">1</span>, <span class="st">'b'</span>: <span class="dv">0</span>, <span class="st">'c'</span>: <span class="dv">0</span>, <span class="st">'d'</span>: <span class="dv">0</span>, <span class="st">'e'</span>: <span class="dv">0</span>, <span class="st">'f'</span>:<span class="op">-</span><span class="dv">1</span>, <span class="st">'g'</span>:<span class="op">-</span><span class="dv">1</span>, <span class="st">'h'</span>: <span class="dv">0</span>}</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>maladies[<span class="st">'Lambdacrite'</span>]  <span class="op">=</span> {<span class="st">'a'</span>:<span class="op">-</span><span class="dv">1</span>, <span class="st">'b'</span>: <span class="dv">0</span>, <span class="st">'c'</span>: <span class="dv">0</span>, <span class="st">'d'</span>: <span class="dv">0</span>, <span class="st">'e'</span>:<span class="op">-</span><span class="dv">1</span>, <span class="st">'f'</span>:<span class="op">-</span><span class="dv">1</span>, <span class="st">'g'</span>:<span class="op">-</span><span class="dv">1</span>, <span class="st">'h'</span>: <span class="dv">0</span>}</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>maladies[<span class="st">'Mutension'</span>]    <span class="op">=</span> {<span class="st">'a'</span>: <span class="dv">1</span>, <span class="st">'b'</span>: <span class="dv">0</span>, <span class="st">'c'</span>: <span class="dv">0</span>, <span class="st">'d'</span>: <span class="dv">0</span>, <span class="st">'e'</span>: <span class="dv">0</span>, <span class="st">'f'</span>: <span class="dv">0</span>, <span class="st">'g'</span>: <span class="dv">1</span>, <span class="st">'h'</span>: <span class="dv">0</span>}</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> verbose:</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> illness <span class="kw">in</span> maladies.keys():</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(illness, maladies[illness])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'a': 0, 'b': 1, 'c': -1, 'd': 0, 'e': 0, 'f': 0, 'g': 0, 'h': -1}
Alphatis {'a': 1, 'b': 0, 'c': -1, 'd': 0, 'e': 0, 'f': 1, 'g': 0, 'h': 0}
Betatosis {'a': 0, 'b': 1, 'c': -1, 'd': 0, 'e': 1, 'f': 0, 'g': 0, 'h': -1}
Gammonoma {'a': 0, 'b': 0, 'c': 0, 'd': 1, 'e': 1, 'f': 1, 'g': 0, 'h': 0}
Deltacol {'a': 0, 'b': 0, 'c': 0, 'd': 0, 'e': 0, 'f': 0, 'g': 0, 'h': 0}
Epsicusus {'a': 0, 'b': 0, 'c': 0, 'd': 0, 'e': 0, 'f': 0, 'g': 0, 'h': -1}
Zetad {'a': 0, 'b': 1, 'c': -1, 'd': 0, 'e': -1, 'f': -1, 'g': 0, 'h': 0}
Etamia {'a': 1, 'b': 0, 'c': 0, 'd': -1, 'e': 0, 'f': 0, 'g': 0, 'h': -1}
Thetadesis {'a': 0, 'b': 1, 'c': -1, 'd': 0, 'e': 0, 'f': 0, 'g': 0, 'h': -1}
Iotaglia {'a': 1, 'b': 0, 'c': 0, 'd': 0, 'e': -1, 'f': 1, 'g': 1, 'h': 0}
Kappacide {'a': -1, 'b': 0, 'c': 0, 'd': 0, 'e': 0, 'f': -1, 'g': -1, 'h': 0}
Lambdacrite {'a': -1, 'b': 0, 'c': 0, 'd': 0, 'e': -1, 'f': -1, 'g': -1, 'h': 0}
Mutension {'a': 1, 'b': 0, 'c': 0, 'd': 0, 'e': 0, 'f': 0, 'g': 1, 'h': 0}</code></pre>
</div>
</div>
<div id="medical-diagnosis---mvp-solution" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># a metric based diagnosis</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> diagnoser(patient,illness):</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># takes a patient spec and an illness spec</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># return a distance between patient and illness spec</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  score <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> k <span class="kw">in</span> patient.keys():</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> patient[k] <span class="op">==</span> illness[k]:</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>      score <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>      score <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> score </span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co"># next we find the best diagnosis for the for the patient </span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>diag_score<span class="op">=</span><span class="dv">0</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>diagnosis<span class="op">=</span>[]</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> illness <span class="kw">in</span> maladies.keys():</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  score <span class="op">=</span> diagnoser(patient, maladies[illness])</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="ss">f"score for </span><span class="sc">{</span>illness<span class="sc">}</span><span class="ss"> = </span><span class="sc">{</span>score<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> score <span class="op">&gt;</span> diag_score:</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    diag_score <span class="op">=</span> score</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>    diagnosis <span class="op">=</span> []</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> score <span class="op">&gt;=</span> diag_score:</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>    diagnosis.append(illness)</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(diagnosis)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>score for Alphatis = 0
score for Betatosis = 6
score for Gammonoma = -4
score for Deltacol = 2
score for Epsicusus = 4
score for Zetad = 2
score for Etamia = 0
score for Thetadesis = 8
score for Iotaglia = -6
score for Kappacide = -4
score for Lambdacrite = -6
score for Mutension = -2
['Thetadesis']</code></pre>
</div>
</div>
<p>note: this would have been less code if I used a numpy array for symptoms and a cosine similarity.</p>
<p>What we consider a good solution</p>
<ol type="1">
<li><p>This answer covers all these signs and symptoms. This is the principle of <strong>coverage</strong>. We want to make sure that the diagnostic conclusion actually accounts for all the input data.</p></li>
<li><p>we chose a single hypothesis over a combination of hypothesis, although the combination could have explain this data as well. This is the principle of <strong>parsimony</strong>. In general, we want a simple hypothesis for explaining the entire data.</p></li>
<li><p>These hypotheses can have <strong>greatest interactions</strong> between them, and these interactions can make your diagnostic task quite complicated.</p></li>
<li><p>They would use the term <strong>explanation</strong>. This is an important aspect for diagnosis.</p></li>
</ol>
<p>We want a set of hypotheses that could explain the input data. Now this time we succedded in this simple exercise, because there is one single disease that can, in fact, explain all the input data.</p>
<p>Edge cases:</p>
<ul>
<li>What would happen if there was no single hypothesis that could cover the entire input data?
<ul>
<li>I would return an empty set of hypothesis.</li>
<li>One could code a stronger algorithm to test for sets up N maladies.
<ul>
<li>The solver would need to consider that maladies might interact e.g.&nbsp;if one raises fever, the other reduces fever the combination would present temperature as normal.</li>
</ul></li>
</ul></li>
<li>What would happen if there were multiple hypotheses that could equally well explain the input data?
<ul>
<li>I would return a list of hypotheses - this is supported!</li>
</ul></li>
</ul>
<p>Diagnostic task can be quite complicated.</p>
<section id="sec-defining-diagnosis" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="sec-defining-diagnosis">Defining Diagnosis</h2>
<dl>
<dt>Diagnosis</dt>
<dd>
<p>To determine what is wrong with a malfunctioning device</p>
</dd>
</dl>

<div class="no-row-height column-margin column-container"><div id="fig-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="image02.webp" class="lightbox" data-gallery="quarto-lightbox-gallery-3" data-glightbox="description: .lightbox-desc-3"><img src="image02.webp" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: automotive diagnosis
</figcaption>
</figure>
</div><div id="fig-3" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="image03.webp" class="lightbox" data-gallery="quarto-lightbox-gallery-4" data-glightbox="description: .lightbox-desc-4"><img src="image03.webp" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: diagnosing of a faulty computer fan based strange noise from hardware
</figcaption>
</figure>
</div><div id="fig-4" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="image04.webp" class="lightbox" data-gallery="quarto-lightbox-gallery-5" data-glightbox="description: .lightbox-desc-5"><img src="image04.webp" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: <a href="https://commons.wikimedia.org/wiki/File:Rubber_duck_assisting_with_debugging.jpg#mediaviewer/File:Rubber_duck_assisting_with_debugging.jpg">Rubber duck assisting with debugging</a> by <a href="https://commons.wikimedia.org/wiki/User:Tom_Morris">Tom Morris</a>
</figcaption>
</figure>
</div></div>

<p>We discussed the same diagnostic task in three different domains. In each domain, there was <mark>a discrepancy between the expected and observed behaviors</mark>. We tried to identify the fault or faults responsible for it. We alluded to three different methods for doing diagnosis.</p>
<ol type="1">
<li>The method of <strong>rule-based reasoning</strong>.</li>
<li>the method of <strong>case-based reasoning</strong>.</li>
<li>the method of <strong>model-based reasoning</strong>.</li>
</ol>
<p>We haven‚Äôt talked much about model-based reasoning so far ‚Äî we will when we come to systems thinking later in the class. We can use the method of rule-based engine not only for diagnosing car engines, but also for repairing computer hardware or for diagnosing computer software. In this particular lesson, <mark>our focus will be on the diagnostic task.</mark> By now, we are already familiar with many reasoning methods that are potentially applicable.</p>
</section>
<section id="sec-data-space-and-hypothesis-space" class="level2">
<h2 class="anchored" data-anchor-id="sec-data-space-and-hypothesis-space">Data Space and Hypothesis Space</h2>
<p>We can think of diagnosis as a mapping from a data space, to a hypothesis space, In case of a medical diagnosis, the data may be the greatest kind of signs and symptoms that I may go to a doctor with.</p>
<p>Some of the data may be very specific, some of it may be very abstract, an example of a very specific data is that Ashock‚Äôs temperature is 104 degrees Fahrenheit.</p>
<p>An example of the extraction of the data is that is running a fever.</p>
<p>The hypothesis space consists of all hypothesis that can explain parts of the observed data. A hypothesis in the hypothesis space can explain some part of the data, In case of medicine, this hypothesis may reference to diseases.</p>
<p>A doctor may say that my hypothesis is that a shook is suffering from flu, and that explains his high fever. In the domain of car repairs, this hypothesis may refer to specific faults with the car, for example, the carburetor is not working properly.</p>
<p>In the domain of computer software, this hypothesis may refer to specific methods not working properly. And this mapping from data space to the hypothesis space can be very complex.</p>
<p><mark>The complexity arises partly because of the size of data space, partly because of the size of hypothesis space, partly because the mapping can be M to N.</mark></p>
<p>And also, because this hypothesis can interact with each other, If <span class="math inline">H_3</span> is present, <span class="math inline">H_4</span> may be excluded, If <span class="math inline">H_5</span> is present, <span class="math inline">H_6</span> is sure to be present and so on.</p>
<p><mark>It helps then not to deal with all the raw data, but to deal with abstractions of the data, so the initial data that a patient may go to a doctor with may be very, very specific.</mark></p>
<p>The signs and symptoms of their particular specific patient, but the diagnostic process might abstract them from Ashok has a fever of 104 degrees Fahrenheit to Ashok has a high fever.</p>
<p>This abstract data that can be mapped into an abstract hypothesis, Ashok has high fever can get mapped into Ashok has a bladder infection for example.</p>
<p>The abstract hypothesis can now be refined into a suffering from flu or a flu for a particular screen. <mark>At the end, we want a hypothesis that is as refined as possible, and that explains all the available data.</mark> When we were talking about <a href="../11-classification/11-classification.html">classification</a>, we talked about <a href="../11-classification/11-classification.html#sec-bottom-up-search">bottom-up process</a> and our <a href="../11-classification/11-classification.html#sec-top-down-search">top-down process</a>.</p>
<p>The bottom-up process of classification, we started with raw data and then grouped and abstracted, it in case of top-down classification we started with some high-level class and then established it and refined it. You can see that in diagnosis both the bottom-up and the top-down processes of classification co-occur.</p>
<p>This method of bottom-up classification in data space, mapping and then top-down classification of hypothesis space is called <em>heuristic classification</em>. This is yet another method like rule-based reasoning, case-based reasoning, and model-based reasoning with a diagnostic task.</p>
</section>
<section id="sec-problems-with-diagnosis-as-classification" class="level2">
<h2 class="anchored" data-anchor-id="sec-problems-with-diagnosis-as-classification">Problems with Diagnosis as Classification</h2>
<p>Problem 1: Multiple hypothesis explain one data point (One to Many mapping)</p>
<p>Problem 2: One hypothesis for multiple sets data. (Many to One mapping)</p>
<p>Problem 3: We can also have both above issues (Many to Many mapping)</p>
<p>Problem 4: Mutual exclusion between hypothesis (say <span class="math inline">H_1</span> excludes <span class="math inline">H_2</span> and visa versa)</p>
<p>Problem 5: Interacting data points (if <span class="math inline">H_1</span> ‚ÄúHigh fever‚Äù could cancel <span class="math inline">H_2</span> ‚ÄúLow fever‚Äù in the patient)</p>
<p>In general, <em>cancellation</em> interactions are very hard to account for üò±</p>
<p>What this means diagnosis in general is more complex than classification.</p>
<p>In order to address these factors that make diagnosis so complex, it is useful to shift perspective from <em>diagnosis as classification</em> to a view of <em>diagnosis as abduction</em>.</p>
</section>
<section id="sec-deduction-induction-abduction" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="sec-deduction-induction-abduction">Deduction, Induction, Abduction</h2>

<div class="no-row-height column-margin column-container"><div id="fig-5" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="image05.webp" class="lightbox" data-gallery="quarto-lightbox-gallery-6" data-glightbox="description: .lightbox-desc-6"><img src="image05.webp" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Deduction
</figcaption>
</figure>
</div></div><p>Given the rule ‚Äú<strong>if flu then fever</strong>‚Äù and the fact ‚Äú<strong>Ashok has fever</strong>‚Äù we could abduce that ‚Äú<strong>Ashok has flu</strong>‚Äù.</p>
<p>Notice that we are back to diagnosis. <mark>Diagnosis is an instance of abduction</mark>.But notice several other properties.</p>
<ol type="1">
<li><p><strong>Deduction is truth preserving</strong>. If the <em>rule</em> is true, and the <em>cause</em> is true, we can always guarantee that the effect is true as well.</p></li>
<li><p><strong>Induction and abduction are not truth preserving</strong>. We may know something about the relationship between cause and effect for some sample, that does not mean that the same relationship holds for the entire population. Induction does not always guarantee correctness nor does abduction.</p></li>
</ol>
<p>This is exactly the problem that we had encountered earlier when we talking about what makes diagnosis hard. We said that <em>deduction, induction</em>, and <em>abduction</em>, are three of the fundamental forms of inference. We can of course also combine these inferences.</p>
<p>Might the cycle also explain significant part of cognition? Is this what you and I do on a daily basis? Abuse, induce, reduce?</p>
<ul>
<li>Deduction is reasoning from a generality to the specific using propositional logic.</li>
<li>Induction is reasoning by generalizing from specifics to a a generality i.e.&nbsp;deriving a rule from examples. But if we check all possible example we might find counter examples that require revision or discarding the rule.</li>
<li>Abduction is reasoning based on experience - we satisfice by picking the most likely choice sacrificing accuracy for cases with implausible outcomes.</li>
</ul>
<p>We can of course also combine these inferences.</p>
<p>‚Äì&gt;</p>
</section>
<section id="sec-criteria-for-choosing-a-hypothesis" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="sec-criteria-for-choosing-a-hypothesis">Criteria for Choosing a Hypothesis</h2>
<p>Now that we understand abduction, and now that we know the diagnosis is an instance of abduction, let us ask ourselves, how does this understanding help us in choosing hypotheses?</p>
<p>The first principle for choosing a hypothesis is <strong>explanatory coverage</strong>. A hypotheses must cover as much of the data as possible.</p>

<div class="no-row-height column-margin column-container"><div id="fig-6" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-6-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="image06.webp" class="lightbox" data-gallery="quarto-lightbox-gallery-7" data-glightbox="description: .lightbox-desc-7"><img src="image06.webp" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-6-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: Coverage
</figcaption>
</figure>
</div></div><p>Here‚Äôs an example, hypotheses <span class="math inline">H_3</span> explain data items <span class="math inline">D_1</span> through <span class="math inline">D_8</span>. Hypothesis <span class="math inline">H_7</span> explains data item <span class="math inline">D_5</span> to <span class="math inline">D_9</span>. Assuming that all of these data elements are equally important or equally salient, we may prefer <span class="math inline">H_3</span> over <span class="math inline">H_7</span> because it explains for of the data than does <span class="math inline">H_7</span>.</p>

<div class="no-row-height column-margin column-container"><div id="fig-7" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="image07.webp" class="lightbox" data-gallery="quarto-lightbox-gallery-8" data-glightbox="description: .lightbox-desc-8"><img src="image07.webp" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7: Parsimony
</figcaption>
</figure>
</div></div><p>The second principle for choosing between competing hypotheses is called the <strong>principle of Parsimony</strong>. All things being equal, we want to pick the simplest explanation for the data. So consider the following scenario. <span class="math inline">H_2</span> explains data elements <span class="math inline">D_1</span> to <span class="math inline">D_3</span>. <span class="math inline">H_4</span> explains data elements <span class="math inline">D_1</span> through <span class="math inline">D_8</span>. <span class="math inline">H_6</span> explains data elements <span class="math inline">D_4</span> to <span class="math inline">D_6</span> and <span class="math inline">H_8</span> explains data elements <span class="math inline">D_7</span> to <span class="math inline">D_9</span>. Now if you went by the criteria of explanatory coverage, then we might pick <span class="math inline">H_2</span>, plus <span class="math inline">H_6</span>, plus <span class="math inline">H_8</span>, because the three of them combined, explain more than just <span class="math inline">H_4</span>. However, the criteria of Parsimony would suggest if you pick <span class="math inline">H_4</span>, because <span class="math inline">H_4</span> alone, explains almost all the data, and we don‚Äôt need the other three hypothesis. In general this is a balancing act between these two principles. We want to both maximize the coverage, and maximize the parsimony. Based on this particular example, we may go with <span class="math inline">H_4</span> and <span class="math inline">H_8</span>. The two together explain all the data and in addition, the set of these two hypotheses is smaller than these set of hypotheses <span class="math inline">H_2</span>, <span class="math inline">H_6</span>, and <span class="math inline">H_8</span>.</p>

<div class="no-row-height column-margin column-container"><div id="fig-8" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-8-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="image08.webp" class="lightbox" data-gallery="quarto-lightbox-gallery-9" data-glightbox="description: .lightbox-desc-9"><img src="image08.webp" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-8-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;8: Confidence
</figcaption>
</figure>
</div></div><p>The third criteria for choosing between competing hypotheses is that we want to pick those hypotheses in which we have more <strong>confidence</strong> . Some hypothesis are more likely than other and one may have more confidence in some hypotheses than in others.</p>
<p>As an example, in this particular scenario, <span class="math inline">H_3</span> may explain data items <span class="math inline">D_1</span> to <span class="math inline">D_8</span> and <span class="math inline">H_5</span> may explain more data elements from <span class="math inline">D_1</span> to <span class="math inline">D_9</span>. So <span class="math inline">H_5</span> also explains <span class="math inline">D_9</span> that <span class="math inline">H_3</span> doesn‚Äôt. However, we may have more confidence in <span class="math inline">H_3</span>, and so we may pick <span class="math inline">H_3</span> instead of <span class="math inline">H_5</span>.</p>
<p>Once again this is a balancing act between these three criteria for choosing between competing diagnostic hypotheses. A quick point to note here, <mark>these three criteria are useful for choosing between competing hypotheses even if the task is not diagnosis.</mark></p>
<p>The same problem occurs for example in intelligence analysis. Imagine that you have some data that needs to be explained and your competing hypothesis for explaining that particular data, well, you may pick between the competing hypothesis based on this criteria. All of the task is not a diagnostic task. These three criteria are useful for explanation. Diagnosis simply happens to be an example of this explanation task.</p>
</section>
<section id="sec-exercise-diagnosis-as-abduction" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="sec-exercise-diagnosis-as-abduction">Exercise Diagnosis as Abduction</h2>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ex2.webp" class="lightbox" data-gallery="quarto-lightbox-gallery-10" data-glightbox="description: .lightbox-desc-10" title="Exercise"><img src="ex2.webp" class="img-fluid figure-img" alt="Exercise"></a></p>
<figcaption>Exercise</figcaption>
</figure>
</div></div><p>Let us do an exercise together.</p>
<div id="medical-diagnosis-challange---mvp-solution" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> itertools</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> collections</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> collections <span class="im">import</span> defaultdict</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>patient <span class="op">=</span> {k:v <span class="cf">for</span> (k,v) <span class="kw">in</span> <span class="bu">zip</span>(letters ,(<span class="dv">0</span>,<span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>))}</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co"># a metric based diagnosis</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> diagnoser(patient,illness):</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># takes a patient spec and an illness spec</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># return a distance between patient and illness spec</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  match,mismatch,score <span class="op">=</span> <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> k <span class="kw">in</span> patient.keys():</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> patient[k] <span class="op">==</span> illness[k] <span class="kw">and</span> <span class="kw">not</span> patient[k] <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>      match <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> patient[k] <span class="op">==</span> illness[k]:</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>      mismatch <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  score <span class="op">=</span> match <span class="op">-</span> mismatch</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> match,mismatch,score </span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="co"># next we find the expected coverage for a diagnosis given the patient </span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>_,_,expected_score <span class="op">=</span> diagnoser(patient, patient)</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"expected score for patient : </span><span class="sc">{</span>expected_score<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> merge(keys,maladies):</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>  res <span class="op">=</span> collections.defaultdict(<span class="bu">int</span>)</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>  counter<span class="op">=</span><span class="dv">0</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> illness <span class="kw">in</span> keys:</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>    counter <span class="op">+=</span><span class="dv">1</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> symptom <span class="kw">in</span> maladies[illness].keys():</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>      res[symptom] <span class="op">+=</span> maladies[illness][symptom]</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> key <span class="kw">in</span> res.keys():</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> res[key] <span class="op">&gt;</span> <span class="dv">1</span> :</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>      res[key] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> res[key] <span class="op">&lt;</span> <span class="op">-</span><span class="dv">1</span> :</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>      res[key] <span class="op">=</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> res</span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>diag_score<span class="op">=</span><span class="dv">0</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>diagnosis<span class="op">=</span>[]</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>maldies_set <span class="op">=</span> <span class="bu">set</span>(maladies.keys())</span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> comb_len <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">3</span>):</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> keys <span class="kw">in</span> itertools.combinations(maldies_set,comb_len):</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>    key_list <span class="op">=</span> <span class="bu">list</span>(keys)</span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>    key_list.sort()</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> key_list <span class="kw">not</span> <span class="kw">in</span> diagnosis:</span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>      <span class="co">#print(key_list)</span></span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>      merged_spec <span class="op">=</span> merge(key_list,maladies)</span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>      match, mismatch, score <span class="op">=</span> diagnoser(patient, merged_spec)</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>      <span class="co">#print(f"match:{match:&lt;1}, missed:{mismatch:&lt;2}, total:{score:&lt;2} score for {key_list}")</span></span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> score <span class="op">&gt;</span> diag_score:</span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>        diag_score <span class="op">=</span> score</span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>        diagnosis <span class="op">=</span> []</span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> score <span class="op">&gt;=</span> diag_score:</span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a>        diagnosis.append(key_list)</span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> score <span class="op">==</span> expected_score:</span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a>          status<span class="op">=</span><span class="st">"full"</span></span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a>          status<span class="op">=</span><span class="st">"partial"</span></span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>status<span class="sc">:&lt;5}</span><span class="ss"> diagnosis metrics: score:</span><span class="sc">{</span>score<span class="sc">:&lt;2}</span><span class="ss"> hits:</span><span class="sc">{</span>match<span class="sc">:&lt;1}</span><span class="ss">, misses:</span><span class="sc">{</span>mismatch<span class="sc">:&lt;2}</span><span class="ss">, for </span><span class="sc">{</span>key_list<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'final diagnosis: </span><span class="sc">{</span>diagnosis<span class="sc">}</span><span class="ss">'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>expected score for patient : 4
partial diagnosis metrics: score:2  hits:3, misses:1 , for ['Thetadesis']
partial diagnosis metrics: score:2  hits:3, misses:1 , for ['Epsicusus', 'Thetadesis']
partial diagnosis metrics: score:3  hits:4, misses:1 , for ['Epsicusus', 'Zetad']
partial diagnosis metrics: score:3  hits:4, misses:1 , for ['Thetadesis', 'Zetad']
full  diagnosis metrics: score:4  hits:4, misses:0 , for ['Betatosis', 'Zetad']
final diagnosis: [['Betatosis', 'Zetad']]</code></pre>
</div>
</div>
<p>Note that one can use alternative methods for the same problem.</p>
<p>For example, one could use K-space reasoning.</p>
<p>And for when we came across a problem very similar to this one previously. Suppose that the solution of that particular problem was ever labeled as a case. In that particular case, B was high, C was low, and H was low. And the solution was Thetadesis.</p>
<p>In the current problem, the additional symptom is that F is low. So case retrieval would first lead you to the conclusion of Thetadesis. But this particular solution should also account for the additional symptom of F being low. We could do that by adding Kappacide and Mutension to Thetadesis. Case based system thus would tend to focus the alternate set of hypotheses.</p>
<p>Different methods can lead to different solutions - particularly since we discussed a number of conflicting priorities between good solutions. This suggests that each tradeoff between parsimony, coverage and completeness may give a different diagnosis.</p>
<p>Given these different methods, how might an AI agent decide which method to select?</p>
<p>The basic method in ML is to create different loss functions representing different priorities. I chose one that prioritizes parsimony over confidence in the sense that when I merged hypothesis I allowed them to cancel opposing effects. However, we might not be certain this is how a set of hypothesis should interact.</p>
<p>We‚Äôll return to this particular problem when we discuss meta-reasoning.</p>
</section>
<section id="sec-completing-the-process" class="level2">
<h2 class="anchored" data-anchor-id="sec-completing-the-process">Completing the Process</h2>
<p>We can also think of this last phase as a type of configuration which we talked about last time. Given a set of hypothesis about illnesses or faults with a car, we can then configure a set of treatments or repairs that best address the faults we discovered before.</p>
</section>
<section id="sec-assignment-diagnosis" class="level2">
<h2 class="anchored" data-anchor-id="sec-assignment-diagnosis">Assignment Diagnosis</h2>
<p>So would the idea of diagnosis help us design an agent that can answer Raven‚Äôs progressive matrices? Perhaps the best way to think about this is to consider how your agent might respond when it answers a question wrong.</p>
<ol type="1">
<li>what data will it use to investigate its incorrect answer?</li>
<li>what hypotheses might it have for incorrect answers?</li>
<li>how will it select a hypothesis that best explains that data?</li>
<li>once it‚Äôs selected hypothesis that explains that data, how will it use that to repair its reasoning, so it doesn‚Äôt make the same mistake again?</li>
</ol>
</section>
<section id="sec-wrap-up" class="level2">
<h2 class="anchored" data-anchor-id="sec-wrap-up">Wrap Up</h2>
<p>We talked about diagnosis which is a term we‚Äôre very familiar with from our everyday lives. But today, we talked about it specifically in a knowledge-based AI sense. We started off by defining diagnosis, which is finding the fault responsible for the malfunction in some system. This can be computers, computer programs, cars or even people and animals.</p>
<p>We then talked about the process of diagnosis, mapping data onto hypotheses and how we can see this as a form of <strong>classification</strong>. We discovered though that this can be a very complicated process and <em>classification might not get us all the way there</em>. So then we talked about diagnosis as a form of abduction. Given a rule and effect or a symptom, we can abduce the cause of that problem, like an illness or a software bug.</p>
<p>Both configuration and diagnosis have been small tasks in the broader process of design. Now that we talk about them, we can talk about AI agents that can actually do design in the real world, as well as what it would mean for an AI agent to really be creative.</p>
</section>
<section id="sec-the-cognitive-connection" class="level2">
<h2 class="anchored" data-anchor-id="sec-the-cognitive-connection">The Cognitive Connection</h2>
<p>Diagnosis is a very common cognitive task. It occurs whenever our expectations are violated. We start diagnosing. Why were our expectations violated? Within a system, we expect some behavior out of it. We get a different behavior. Why did the system not give the behavior we expected from it? Notice that diagnosis is a task. We can use several methods to address it, like case-based reasoning. We have discussed diagnosis on several contexts like medicine, program debugging, car repair, but it‚Äôs also very common in other aspects of our life. For example, you get unexpected traffic. Why did it occur? We review interaction with a co-worker or the economy. All are examples of diagnosis</p>
</section>
<section id="sec-deep-rl--bayesian-learning" class="level2">
<h2 class="anchored" data-anchor-id="sec-deep-rl--bayesian-learning">Deep RL &amp; Bayesian Learning</h2>


<div class="hidden" aria-hidden="true">
<span class="glightbox-desc lightbox-desc-1">medical diagnosis</span>
<span class="glightbox-desc lightbox-desc-2">Exercise</span>
<span class="glightbox-desc lightbox-desc-3">Figure&nbsp;2: automotive diagnosis</span>
<span class="glightbox-desc lightbox-desc-4">Figure&nbsp;3: diagnosing of a faulty computer fan based strange noise from hardware</span>
<span class="glightbox-desc lightbox-desc-5">Figure&nbsp;4: <a href="https://commons.wikimedia.org/wiki/File:Rubber_duck_assisting_with_debugging.jpg#mediaviewer/File:Rubber_duck_assisting_with_debugging.jpg">Rubber duck assisting with debugging</a> by <a href="https://commons.wikimedia.org/wiki/User:Tom_Morris">Tom Morris</a></span>
<span class="glightbox-desc lightbox-desc-6">Figure&nbsp;5: Deduction</span>
<span class="glightbox-desc lightbox-desc-7">Figure&nbsp;6: Coverage</span>
<span class="glightbox-desc lightbox-desc-8">Figure&nbsp;7: Parsimony</span>
<span class="glightbox-desc lightbox-desc-9">Figure&nbsp;8: Confidence</span>
<span class="glightbox-desc lightbox-desc-10">Exercise</span>
</div>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Minimal Viable Product<a href="#fnref1" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn2"><p>Causal Inference<a href="#fnref2" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn3"><p>explainable AI<a href="#fnref3" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn4"><p>counterfactual examples<a href="#fnref4" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
</ol>
</section><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div>CC SA BY-NC-ND</div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{bochman2016,
  author = {Bochman, Oren},
  title = {Lesson 22 {Diagnosis}},
  date = {2016-02-16},
  url = {https://orenbochman.github.io/blog//notes/cognitivie-ai-cs7637/22-diagnosis/22-diagnosis.html},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-bochman2016" class="csl-entry quarto-appendix-citeas" role="listitem">
Bochman, Oren. 2016. <span>‚ÄúLesson 22 Diagnosis.‚Äù</span> February 16,
2016. <a href="https://orenbochman.github.io/blog//notes/cognitivie-ai-cs7637/22-diagnosis/22-diagnosis.html">https://orenbochman.github.io/blog//notes/cognitivie-ai-cs7637/22-diagnosis/22-diagnosis.html</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("^(?:http:|https:)\/\/www\.quarto\.org\/custom");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="OrenBochman/blogComments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 Copyright 2024, Oren Bochman
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../../about.html">
<p>About</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../../license.html">
<p>License</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../../trademark.html">
<p>Trademark</p>
</a>
  </li>  
</ul>
    <div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"loop":false,"openEffect":"zoom","closeEffect":"zoom","selector":".lightbox","descPosition":"bottom"});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>




<script src="../../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>