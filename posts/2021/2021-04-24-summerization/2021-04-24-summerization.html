<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Oren Bochman">
<meta name="dcterms.date" content="2021-04-24">
<meta name="description" content="Concepts, slide commentaries and Lecture notes on Automatic text Summarization by Masa Nekic">

<title>Oren Bochman’s Blog - Automatic Summarization Task</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script> 
  
<style>html{ scroll-behavior: smooth; }</style>
<script src="../../../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../../../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css">

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<meta name="twitter:title" content="Oren Bochman’s Blog - Automatic Summarization Task">
<meta name="twitter:description" content="Concepts, slide commentaries and Lecture notes on Automatic text Summarization by Masa Nekic">
<meta name="twitter:image" content="https://orenbochman.github.io/blog/posts/2021/2021-04-24-summerization/notes-formulas.jpg">
<meta name="twitter:creator" content="@orenbochman">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../images/logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Oren Bochman’s Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-book" role="button" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-book" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-bi-book">    
        <li>
    <a class="dropdown-item" href="../../../dnn.html">
 <span class="dropdown-text">Neural Networks for Machine Learning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../model-thinking.html">
 <span class="dropdown-text">Model Thinking</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/orenbochman"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-github" role="button" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-bi-github">    
        <li>
    <a class="dropdown-item" href="https://github.com/OrenBochman/blog">
 <span class="dropdown-text">Source Code</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/OrenBochman/blog/issues">
 <span class="dropdown-text">Report a Bug</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="../../../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../archive.html"> <i class="bi bi-archive" role="img">
</i> 
<span class="menu-text">Archive</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Automatic Summarization Task</h1>
                  <div>
        <div class="description">
          Concepts, slide commentaries and Lecture notes on Automatic text Summarization by Masa Nekic
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">NLP</div>
                <div class="quarto-category">notes</div>
                <div class="quarto-category">summarization task</div>
                <div class="quarto-category">lecture notes</div>
                <div class="quarto-category">bibliography</div>
                <div class="quarto-category">literature review</div>
                <div class="quarto-category">video</div>
                <div class="quarto-category">automatic extracting</div>
                <div class="quarto-category">automatic abstracting</div>
                <div class="quarto-category">sentence selection</div>
                <div class="quarto-category">document screening</div>
                <div class="quarto-category">sentence significance</div>
                <div class="quarto-category">relevance</div>
                <div class="quarto-category">content words</div>
                <div class="quarto-category">key words</div>
                <div class="quarto-category">pragmatic words</div>
                <div class="quarto-category">cue words</div>
                <div class="quarto-category">title words</div>
                <div class="quarto-category">sentence location</div>
                <div class="quarto-category">research methodology</div>
                <div class="quarto-category">parameterization</div>
                <div class="quarto-category">comparative evaluation</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Oren Bochman </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">April 24, 2021</p>
      </div>
    </div>
    
      <div>
      <div class="quarto-title-meta-heading">Modified</div>
      <div class="quarto-title-meta-contents">
        <p class="date-modified">April 24, 2021</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#automatic-text-summarization-task" id="toc-automatic-text-summarization-task" class="nav-link active" data-scroll-target="#automatic-text-summarization-task">Automatic Text Summarization Task</a></li>
  <li><a href="#concepts" id="toc-concepts" class="nav-link" data-scroll-target="#concepts">Concepts</a>
  <ul class="collapse">
  <li><a href="#ontological-mindmap" id="toc-ontological-mindmap" class="nav-link" data-scroll-target="#ontological-mindmap">Ontological Mindmap</a></li>
  <li><a href="#extractive-vs.-abstractive" id="toc-extractive-vs.-abstractive" class="nav-link" data-scroll-target="#extractive-vs.-abstractive">Extractive vs.&nbsp;Abstractive</a></li>
  <li><a href="#extractive-summaries-illustrated" id="toc-extractive-summaries-illustrated" class="nav-link" data-scroll-target="#extractive-summaries-illustrated">Extractive Summaries Illustrated</a></li>
  <li><a href="#abstractive-summaries-illustrated" id="toc-abstractive-summaries-illustrated" class="nav-link" data-scroll-target="#abstractive-summaries-illustrated">Abstractive Summaries Illustrated</a></li>
  </ul></li>
  <li><a href="#algorithms-methods" id="toc-algorithms-methods" class="nav-link" data-scroll-target="#algorithms-methods">Algorithms &amp; Methods</a>
  <ul class="collapse">
  <li><a href="#positional-method" id="toc-positional-method" class="nav-link" data-scroll-target="#positional-method">Positional method</a></li>
  <li><a href="#luhns-method" id="toc-luhns-method" class="nav-link" data-scroll-target="#luhns-method">Luhn’s method</a></li>
  <li><a href="#edmundsons-method" id="toc-edmundsons-method" class="nav-link" data-scroll-target="#edmundsons-method">Edmundson’s method</a></li>
  <li><a href="#frump---fast-reading-understanding-and-memory-program" id="toc-frump---fast-reading-understanding-and-memory-program" class="nav-link" data-scroll-target="#frump---fast-reading-understanding-and-memory-program">FRUMP - Fast Reading Understanding and Memory Program</a>
  <ul class="collapse">
  <li><a href="#my-insights" id="toc-my-insights" class="nav-link" data-scroll-target="#my-insights">My insights:</a></li>
  </ul></li>
  <li><a href="#naive-bayes-classification" id="toc-naive-bayes-classification" class="nav-link" data-scroll-target="#naive-bayes-classification">Naive Bayes Classification</a>
  <ul class="collapse">
  <li><a href="#performance" id="toc-performance" class="nav-link" data-scroll-target="#performance">Performance:</a></li>
  </ul></li>
  <li><a href="#maximum-entropy-classification" id="toc-maximum-entropy-classification" class="nav-link" data-scroll-target="#maximum-entropy-classification">Maximum Entropy Classification</a></li>
  <li><a href="#mmr" id="toc-mmr" class="nav-link" data-scroll-target="#mmr">MMR</a>
  <ul class="collapse">
  <li><a href="#my-insights-1" id="toc-my-insights-1" class="nav-link" data-scroll-target="#my-insights-1">My insights:</a></li>
  </ul></li>
  <li><a href="#mead" id="toc-mead" class="nav-link" data-scroll-target="#mead">Mead</a>
  <ul class="collapse">
  <li><a href="#my-insights-2" id="toc-my-insights-2" class="nav-link" data-scroll-target="#my-insights-2">My insights:</a></li>
  </ul></li>
  <li><a href="#lexrank" id="toc-lexrank" class="nav-link" data-scroll-target="#lexrank">LexRank</a>
  <ul class="collapse">
  <li><a href="#my-insights-3" id="toc-my-insights-3" class="nav-link" data-scroll-target="#my-insights-3">my insights:</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#evaluation" id="toc-evaluation" class="nav-link" data-scroll-target="#evaluation">Evaluation</a>
  <ul class="collapse">
  <li><a href="#what-makes-a-good-summary" id="toc-what-makes-a-good-summary" class="nav-link" data-scroll-target="#what-makes-a-good-summary">What makes a good summary?</a></li>
  <li><a href="#precision-and-recall" id="toc-precision-and-recall" class="nav-link" data-scroll-target="#precision-and-recall">Precision and Recall</a>
  <ul class="collapse">
  <li><a href="#my-insights-4" id="toc-my-insights-4" class="nav-link" data-scroll-target="#my-insights-4">My insights</a></li>
  </ul></li>
  <li><a href="#utility" id="toc-utility" class="nav-link" data-scroll-target="#utility">Utility</a></li>
  <li><a href="#pyramid-method" id="toc-pyramid-method" class="nav-link" data-scroll-target="#pyramid-method">Pyramid method</a></li>
  <li><a href="#rouge-n" id="toc-rouge-n" class="nav-link" data-scroll-target="#rouge-n">ROUGE-N</a></li>
  </ul></li>
  <li><a href="#tools" id="toc-tools" class="nav-link" data-scroll-target="#tools">Tools</a></li>
  <li><a href="#data-sets" id="toc-data-sets" class="nav-link" data-scroll-target="#data-sets">Data Sets</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">





<section id="automatic-text-summarization-task" class="level1">
<h1>Automatic Text Summarization Task</h1>
<p>The material provided in the fast.ai course did not go into depth on the summarization. This is perhaps due to also covering Q&amp;A which is rather similar. I had some ideas when working on the assignment building an abstractive summerier based on GMT2. many ideas came from my background in information retrieval. I had noticed that the issues like coverage and repetition were anathema to summarization from its inception. When I looked for more information I found the following video which together with a review paper can provide a good intro to this subject. I also found links to the papers mentioned and extracted some of their abstracts. I have to admit that looking at all the algorithms critically I found some new ideas for tackling problems, beyond what I had come up with on my own.</p>
<div class="quarto-video"><iframe data-external="1" src="https://www.youtube.com/embed/_d0OXm0dRZ4" width="560" height="315" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<p>Notes from the following lecture by <a href="https://www.crunchbase.com/person/masa-nekic">Masa Nekic</a> given at <a href="https://ndcoslo.com/">NDC Conferences</a>.</p>
<p>The talk provides:</p>
<ul>
<li>a starter ontology.</li>
<li>a review of algorithms.</li>
<li>some evaluation methods</li>
<li>some tools.</li>
</ul>
<p>Given time, I may add data set and review of more modern literature since seq2seq RNN model.</p>
<hr>
</section>
<section id="concepts" class="level1 page-columns page-full">
<h1>Concepts</h1>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="s1-mindmap.png" class="lightbox" data-glightbox="description: .lightbox-desc-1" data-gallery="quarto-lightbox-gallery-1" title="mindmap"><img src="s1-mindmap.png" class="img-fluid figure-img" alt="mindmap"></a></p>
<figcaption>mindmap</figcaption>
</figure>
</div></div><section id="ontological-mindmap" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="ontological-mindmap">Ontological Mindmap</h2>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">mindmap
  Root((Summarization&lt;br&gt;Task))
    id1[Input Based]
        id11(Single document) 
        id12(Multi document)
    id2[Contextal]
        id21[Generic]
        id22(Domain Specific)
        id23(Query)
           id231{{from IR}}
    id3[Output Based]
        id31(Extractive)
          id311{{Picks sentences from the text}}
        id32(Abstractive)
          id321{{Generates from scratch}}
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>Note: the Query based approach intersects with the NLP QA task.</p>
<hr>
<p class="page-columns page-full"><a href="s2-extractive-abstractive.png" class="lightbox page-columns page-full" data-gallery="quarto-lightbox-gallery-2"><div class="no-row-height column-margin column-container"><img src="s2-extractive-abstractive.png" class="img-fluid"></div></a></p>
</section>
<section id="extractive-vs.-abstractive" class="level2">
<h2 class="anchored" data-anchor-id="extractive-vs.-abstractive">Extractive vs.&nbsp;Abstractive</h2>
<p>The “Summarizing before exams” meme demonstrates the extractive approach. The “abridged classics” meme demonstrates the abstractive approach.</p>
<hr>
</section>
<section id="extractive-summaries-illustrated" class="level2">
<h2 class="anchored" data-anchor-id="extractive-summaries-illustrated">Extractive Summaries Illustrated</h2>
<p>Extractive algorithms locate and rank the content of a document.</p>
<blockquote class="blockquote">
<p><mark>Game of Thrones is an American fantasy drama television series created by David Benioff and D. B. Weiss for HBO. It is an adaptation of A Song of Ice and Fire, George R. R. Martin’s series of fantasy novels</mark>, the first of which is A Game of Thrones. The show was both produced and filmed in Belfast and elsewhere in the United Kingdom. Filming locations also included Canada, Croatia, Iceland, Malta, Morocco, and Spain. <mark>The series premiered on HBO in the United States on April 17, 2011, and concluded on May 19, 2019, with 73 episodes broadcast over eight seasons.</mark></p>
<p><mark>Set on the fictional continents of Westeros and Essos, Game of Thrones has several plots and a large ensemble cast and follows several story arcs</mark>. One arc is about the Iron Throne of the Seven Kingdoms and follows a web of alliances and conflicts among the noble dynasties either vying to claim the throne or fighting for independence from it. Another focuses on the last descendant of the realm’s deposed ruling dynasty, who has been exiled and is plotting a return to the throne, while another story arc follows the Night’s Watch, a brotherhood defending the realm against the fierce peoples and legendary creatures of the North.</p>
</blockquote>
<p>Summary (Extractive):</p>
<blockquote class="blockquote">
<p><code>Game of Thrones is an American fantasy drama television series created by David Benioff and D. B. Weiss for HBO. It is an adaptation of A Song of Ice and Fire, George R. R. Martin's series of fantasy novels</code> <code>Set on the fictional continents of Westeros and Essos, Game of Thrones has several plots and a large ensemble cast and follows several story arcs</code></p>
</blockquote>
<p>Extractive Summaries draw text verbatim from the source.</p>
<ol type="1">
<li>This was the more common approach in NLP</li>
<li>it is closely related to IR and Q&amp;A task.</li>
<li>Their main challenges of this approach are: a <em>lack balance</em>, when some parts over represented while others under represented. a <em>lack of cohesion</em>, as extracted text retains dangling pronouns etc.</li>
</ol>
<hr>
</section>
<section id="abstractive-summaries-illustrated" class="level2">
<h2 class="anchored" data-anchor-id="abstractive-summaries-illustrated">Abstractive Summaries Illustrated</h2>
<p>Abstractive algorithms add generation of the extracted content.</p>
<blockquote class="blockquote">
<p>Game of Thrones is an American fantasy drama television series created by David Benioff and D. B. Weiss for HBO. It is an adaptation of A Song of Ice and fire, George R. R. Martin’s series of fantasy novels, the first of which is A Game of Thrones. The show was both produced and filmed in Belfast and elsewhere in the United Kingdom. Filming locations also included Canada, Croatia, Iceland, Malta, Morocco, and Spain, The series premiered on HBO in the United States on April 17, 2011, and concluded on May 19, 2019, with 73 episodes broadcast over eight seasons.</p>
<p>Set on the fictional continents of Westeros and Essos, Game of Thrones has several plots and a large ensemble cast and follows several story arcs. One arc is about the Iron Throne of the Seven Kingdoms and follows a web of alliances and conflicts among the noble dynasties either vying to claim the throne or fighting for independence from it. Another focuses on the last descendant of the realm’s deposed ruling dynasty, who has been exiled and is plotting a return to the throne, while another story arc follows the Night’s Watch, a brotherhood defending the realm against the fierce peoples and legendary creatures of the North. Summary (Abstractive): <code>Game of Thrones is a TV show based on book series A Song of Ice and Fire, written by G. R. R. Martin. All eight seasons were filmed in many beautiful countries across **three different continents**. Game of Thrones has a very complex story with several plots and story arcs — from conflicts between Westeros  nobility to claim the Iron Throne and rule over Seven Kingdoms to fight between brotherhood called Night's watch and enemies from the North.</code></p>
</blockquote>
<ol type="1">
<li><strong>Abstractive</strong> Summaries are not constrained to using text drawn the source. They can draw on <code>common-sense</code> and <code>domain knowledge</code> external to the document.</li>
<li>This is the more challenging approach in NLP</li>
<li>Their main issues are:
<ul>
<li>good coverage.</li>
<li>avoiding repetition.</li>
<li>can provide better <em>compression</em>.</li>
</ul></li>
</ol>
<hr>
</section>
</section>
<section id="algorithms-methods" class="level1 page-columns page-full">
<h1>Algorithms &amp; Methods</h1>
<section id="positional-method" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="positional-method">Positional method</h2>
<ul>
<li>Introduced in <span class="citation" data-cites="Baxendale1958Machine">(<a href="#ref-Baxendale1958Machine" role="doc-biblioref">Baxendale 1958</a>)</span></li>
<li>200 paragraphs</li>
<li>First and last sentence of a paragraph are topic sentences (85% vs 7%)</li>
</ul>
<div class="no-row-height column-margin column-container"><div id="ref-Baxendale1958Machine" class="csl-entry" role="listitem">
Baxendale, P. B. 1958. <span>“Machine-Made Index for Technical Literature—an Experiment.”</span> <em>IBM Journal of Research and Development</em> 2 (4): 354–61. <a href="https://doi.org/10.1147/rd.24.0354">https://doi.org/10.1147/rd.24.0354</a>.
</div></div><p>e.g.</p>
<blockquote class="blockquote">
<p><code>Game of Thrones is an American fantasy drama television series created by David Benioff and D. B. Weiss for HBO</code>. It is an adaptation of A Song of Ice and Fire, George R. R. Martinis series of fantasy novels, the first of which is A Game of Thrones. The show was both produced and filmed in Belfast and elsewhere in the United Kingdom. Filming locations also included Canada, Croatia, Iceland, Malta, Morocco, and Spain. <code>The series premiered on HBO in the United States on April 17, 2011, and concluded on May 19, 2019, with 73 episodes broadcast over eight seasons</code>.</p>
</blockquote>
<hr>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="s8-luhn-method-1958.png" class="lightbox" data-glightbox="description: .lightbox-desc-3" data-gallery="quarto-lightbox-gallery-3" title="s8-luhn-method-1958"><img src="s8-luhn-method-1958.png" class="img-fluid figure-img" alt="s8-luhn-method-1958"></a></p>
<figcaption>s8-luhn-method-1958</figcaption>
</figure>
</div></div></section>
<section id="luhns-method" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="luhns-method">Luhn’s method</h2>
<ul>
<li>Introduced in <span class="citation" data-cites="luhn-58">(<a href="#ref-luhn-58" role="doc-biblioref">Luhn 1958</a>)</span></li>
<li>Frequency of content terms</li>
<li>Data pre-processing
<ul>
<li>Stop words removal</li>
<li>Stemming (cats cat)</li>
</ul></li>
</ul>
<div class="no-row-height column-margin column-container"><div id="ref-luhn-58" class="csl-entry" role="listitem">
Luhn, H. P. 1958. <span>“The Automatic Creation of Literature Abstracts.”</span> <em>IBM Journal of Research and Development</em> 2 (2): 159–65. <a href="https://doi.org/10.1147/rd.22.0159">https://doi.org/10.1147/rd.22.0159</a>.
</div><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="s9-luhn-method-formula.png" class="lightbox" data-glightbox="description: .lightbox-desc-4" data-gallery="quarto-lightbox-gallery-4" title="s9-luhn-method-formula"><img src="s9-luhn-method-formula.png" class="img-fluid figure-img" alt="s9-luhn-method-formula"></a></p>
<figcaption>s9-luhn-method-formula</figcaption>
</figure>
</div></div>
<p>Select sentences with highest concentrations of salient content terms</p>
<p><span class="math display"> Score = \frac{\text{Salient Words}^2}{  \text{Terms in chunk} }</span></p>
<hr>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="s10-edmundson-method.png" class="lightbox" data-glightbox="description: .lightbox-desc-5" data-gallery="quarto-lightbox-gallery-5" title="s10-edmundson-method"><img src="s10-edmundson-method.png" class="img-fluid figure-img" alt="s10-edmundson-method"></a></p>
<figcaption>s10-edmundson-method</figcaption>
</figure>
</div></div></section>
<section id="edmundsons-method" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="edmundsons-method">Edmundson’s method</h2>
<p>Introduced in <span class="citation" data-cites="edmundson-1969">(<a href="#ref-edmundson-1969" role="doc-biblioref">Edmundson 1969</a>)</span></p>
<div class="no-row-height column-margin column-container"><div id="ref-edmundson-1969" class="csl-entry" role="listitem">
Edmundson, H. P. 1969. <span>“New Methods in Automatic Extracting.”</span> <em>Journal of theACM</em> 16 (2): 264–85. <a href="https://courses.ischool.berkeley.edu/i256/f06/papers/edmonson69.pdf">https://courses.ischool.berkeley.edu/i256/f06/papers/edmonson69.pdf</a>.
</div></div><ul>
<li>Position (P)</li>
<li>Word frequency (F)</li>
<li>Cue words (C)</li>
<li>Bonus words — pointing to the important sentence</li>
<li>Stigma words — negative effect on the sentence importance</li>
<li>Null words — neutral or irrelevant to the importance of the sentence</li>
<li>Document structure (S)</li>
</ul>
<p>Linear combination of these 4 features:</p>
<p><span class="math display"> score = \alpha_1 P + \alpha_2 F + \alpha_3 C + \alpha_4 S </span></p>
<blockquote class="blockquote">
<p>This paper describes new methods of automatically extracting documents for screening purposes, i.e.&nbsp;the computer selection of sentences having the greatest potential for conveying to the reader the substance of the document. While previous work has focused on one component of sentence significance, namely, the presence of high-frequency content words (key words), the methods described here also treat three additional components: pragmatic words (cue words); title and heading words; and structural indicators (sentence location). The research has resulted in an operating system and a research methodology. The extracting system is parameterized to control and vary the influence of the above four components. The research methodology includes procedures for the compilation of the required dictionaries, the setting of the control parameters, and the comparative evaluation of the automatic extracts with manually produced extracts. The results indicate that the three newly proposed components dominate the frequency component in the production of better extracts.</p>
</blockquote>
<hr>
</section>
<section id="frump---fast-reading-understanding-and-memory-program" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="frump---fast-reading-understanding-and-memory-program">FRUMP - Fast Reading Understanding and Memory Program</h2>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="s12-FRUMP-demo.png" class="lightbox" data-glightbox="description: .lightbox-desc-6" data-gallery="quarto-lightbox-gallery-6" title="s12-FRUMP-demo"><img src="s12-FRUMP-demo.png" class="img-fluid figure-img" alt="s12-FRUMP-demo"></a></p>
<figcaption>s12-FRUMP-demo</figcaption>
</figure>
</div></div><ul>
<li>Introduced in <span class="citation" data-cites="DeJong1979PredictionAS">(<a href="#ref-DeJong1979PredictionAS" role="doc-biblioref">DeJong 1979</a>)</span></li>
<li>knowledge-based summarization system.</li>
<li>Template filling approach based on UPI news stories.</li>
<li>First abstractive method.</li>
<li>50 sketchy scripts
<ul>
<li>Contain important events that are expected to occur in a specific situation</li>
<li>Summarizer looks for instances of salient events, filling in as many as possible.</li>
</ul></li>
<li>Issues - 50 scripts were not enough.</li>
</ul>
<div class="no-row-height column-margin column-container"><div id="ref-DeJong1979PredictionAS" class="csl-entry" role="listitem">
DeJong, Gerald. 1979. <span>“Prediction and Substantiation: A New Approach to Natural Language Processing.”</span> <em>Cogn. Sci.</em> 3: 251–73. <a href="https://api.semanticscholar.org/CorpusID:28841837">https://api.semanticscholar.org/CorpusID:28841837</a>.
</div></div><blockquote class="blockquote">
<p>This paper describes a new approach to natural language processing which results in a very robust and efficient system. The approach taken is to integrate the parser with the rest of the system. This enables the parser to benefit from predictions that the rest of the system makes in the course of its processing. These predictions can be invaluable as guides to the parser in such difficult problem areas as resolving referents and selecting meanings of ambiguous words. A program, called FRUMP for Fast Reading Understanding and Memory Program, employs this approach to parsing. FRUMP skims articles rather than reading them for detail. The program works on the relatively unconstrained domain of news articles. It routinely understands stories it has never before seen. The program’s success is largely due to its radically different approach to parsing.</p>
</blockquote>
<section id="my-insights" class="level3">
<h3 class="anchored" data-anchor-id="my-insights">My insights:</h3>
<p>This approach has two interesting ideas.</p>
<ul>
<li>KR using templates or frames.</li>
<li>KR using scripts is even more powerful method.</li>
</ul>
<ol type="1">
<li>A modern take on this might involve using a classifier to identify sentences as
<ul>
<li>Facts
<ul>
<li>general knowledge (simple)</li>
<li>domain knowledge (complex or technical)</li>
</ul></li>
<li>Opinions
<ul>
<li>general knowledge (similar to many documents)</li>
<li>domain expert. (similar to a few)</li>
</ul></li>
<li>Events (narrative structure)</li>
<li>Deductive (logic, inference, statistical, syllogism)</li>
<li>Others</li>
</ul></li>
<li>Using a generative approach would allow a deep model to generate its own KR features and templates. An adversarial approach might split this into two nets one to generate and another to test.</li>
<li>Analyzing existing summaries and clustering them might allow one to begin summarize using a preferred template rather than starting from scratch. Clustering, deleting and generalizing from existing summaries may be a means for improving abstractive work.</li>
<li>Putting a focus on the added value of
<ul>
<li>out of document facts and vocabulary</li>
<li>how humans/abstractive summaries differ from extractive ones.</li>
</ul></li>
</ol>
<hr>
</section>
</section>
<section id="naive-bayes-classification" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="naive-bayes-classification">Naive Bayes Classification</h2>
<ul>
<li>Introduced in <span class="citation" data-cites="Kupiec1995ATD">(<a href="#ref-Kupiec1995ATD" role="doc-biblioref">Kupiec, Pedersen, and Chen 1995</a>)</span></li>
<li>First trainable method</li>
<li>Training set: original documents and manually created extracts</li>
<li>Used <strong>Naive Bayes</strong> classifier:</li>
</ul>
<div class="no-row-height column-margin column-container"><div id="ref-Kupiec1995ATD" class="csl-entry" role="listitem">
Kupiec, Julian, Jan O. Pedersen, and Francine R. Chen. 1995. <span>“A Trainable Document Summarizer.”</span> In <em>Annual International ACM SIGIR Conference on Research and Development in Information Retrieval</em>. <a href="https://courses.ischool.berkeley.edu/i256/f06/papers/kupiec95.pdf">https://courses.ischool.berkeley.edu/i256/f06/papers/kupiec95.pdf</a>.
</div></div><p><span class="math display"> P (s \in S \vert F_1 ... F_k) = \frac{P (F_1 ... F_k \vert s \in S ) P(s \in S )} {P (F_1 ... F_k)}  </span></p>
<ul>
<li>By assuming statistical independence of the features it reduces to:</li>
</ul>
<p><span class="math display">  P (s \in S \vert F_1 ... F_k)  = \frac{ \displaystyle \prod_{j \in J} P (F_j \vert s \in S ) P(s \in S )} { \displaystyle \prod_{j \in J} P (F_i)} </span></p>
<section id="performance" class="level3">
<h3 class="anchored" data-anchor-id="performance">Performance:</h3>
<ul>
<li>For 25% extracts - 84% precision</li>
<li>For smaller summaries - 74% improvement over <em>lead summaries</em></li>
</ul>
<hr>
</section>
</section>
<section id="maximum-entropy-classification" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="maximum-entropy-classification">Maximum Entropy Classification</h2>
<ul>
<li>Introduced in <span class="citation" data-cites="Osborne2002UsingME">(<a href="#ref-Osborne2002UsingME" role="doc-biblioref">Osborne 2002</a>)</span><br>
</li>
<li>Maximum entropy models are performing better than Naive Bayes approach</li>
</ul>
<div class="no-row-height column-margin column-container"><div id="ref-Osborne2002UsingME" class="csl-entry" role="listitem">
Osborne, Miles. 2002. <span>“Using Maximum Entropy for Sentence Extraction.”</span> In <em>Annual Meeting of the Association for Computational Linguistics</em>. <a href="https://aclanthology.org/W02-0401.pdf">https://aclanthology.org/W02-0401.pdf</a>.
</div></div><hr>
</section>
<section id="mmr" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="mmr">MMR</h2>
<ul>
<li>Introduced in <span class="citation" data-cites="Carbonell1998TheUO">(<a href="#ref-Carbonell1998TheUO" role="doc-biblioref">Carbonell and Goldstein-Stewart 1998</a>)</span></li>
<li>Maximal Marginal Relevance</li>
<li>Query based summaries.</li>
</ul>
<div class="no-row-height column-margin column-container"><div id="ref-Carbonell1998TheUO" class="csl-entry" role="listitem">
Carbonell, Jaime G., and Jade Goldstein-Stewart. 1998. <span>“The Use of MMR, Diversity-Based Reranking for Reordering Documents and Producing Summaries.”</span> In <em>Annual International ACM SIGIR Conference on Research and Development in Information Retrieval</em>. <a href="https://www.cs.cmu.edu/~jgc/publication/The_Use_MMR_Diversity_Based_LTMIR_1998.pdf">https://www.cs.cmu.edu/~jgc/publication/The_Use_MMR_Diversity_Based_LTMIR_1998.pdf</a>.
</div></div><p><span class="math display">
\text{MMR} = \arg \max[\lambda Sim_1(s_i,Q)-(1-\lambda) \max Sim_2(s_i, s_j)]
</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">Q</span> - user query</li>
<li><span class="math inline">R</span> - ranked list of sentences</li>
<li><span class="math inline">S</span> - already retrieved sentences</li>
<li><span class="math inline">Sim</span> - similarity metrics</li>
<li><span class="math inline">\lambda</span> - hyper-parameter controlling importance of query or other sentence.</li>
</ul>
<blockquote class="blockquote">
<p>This paper presents a method for combining <em>query-relevance</em> with <em>information-novelty</em> in the context of text retrieval and summarization. <strong>The Maximal Marginal Relevance</strong> (MMR) criterion strives to reduce redundancy while maintaining query relevance in re-ranking retrieved documents and in selecting appropriate passages for text summarization. Preliminary results indicate some benefits for MMR diversity ranking in document retrieval and in single document summarization… the clearest advantage is demonstrated in constructing non-redundant multi-document summaries, where MMR results are clearly superior to non-MMR passage selection. <span class="math inline">-</span> The Use of MMR (abstract)</p>
</blockquote>
<hr>
<section id="my-insights-1" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="my-insights-1">My insights:</h3>
<ul>
<li>MMR seems to have a binomial formulation.</li>
<li>By avoiding to pin down the metric it is possible to use embedding similarity with this formulation.</li>
<li>MMR offers a formal metric for measuring added value (utility) For Sentences in a summary.</li>
<li>It can work with or without a query.</li>
<li>It could be adapted as a regularization term in a summarizer loss function.</li>
<li>It could be used on a summary to weigh each sentence’s utility.</li>
<li>If one were able to generate multiple candidates for a factum MMR could be used to easily rank them.</li>
</ul>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="s16-Mead-Centroid.png" class="lightbox" data-glightbox="description: .lightbox-desc-7" data-gallery="quarto-lightbox-gallery-7" title="s16-Mead-Centroid"><img src="s16-Mead-Centroid.png" class="img-fluid figure-img" alt="s16-Mead-Centroid"></a></p>
<figcaption>s16-Mead-Centroid</figcaption>
</figure>
</div></div></section>
</section>
<section id="mead" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="mead">Mead</h2>
<ul>
<li>Introduced in <span class="citation" data-cites="Radev2000CentroidbasedSO">(<a href="#ref-Radev2000CentroidbasedSO" role="doc-biblioref">Radev, Jing, and Budzikowska 2000</a>)</span></li>
<li>Centroid-based method</li>
<li>Single and multi document</li>
</ul>
<div class="no-row-height column-margin column-container"><div id="ref-Radev2000CentroidbasedSO" class="csl-entry" role="listitem">
Radev, Dragomir R., Hongyan Jing, and Malgorzata Budzikowska. 2000. <span>“Centroid-Based Summarization of Multiple Documents: Sentence Extraction, Utility-Based Evaluation, and User Studies.”</span> <em>ArXiv</em> cs.CL/0005020. <a href="https://arxiv.org/pdf/cs/0005020.pdf">https://arxiv.org/pdf/cs/0005020.pdf</a>.
</div></div><blockquote class="blockquote">
<p>We present a multi-document summarizer, called MEAD, which generates summaries using cluster centroids produced by a topic detection and tracking system. We also describe two new techniques, based on sentence utility and subsumption, which we have applied to the evaluation of both single and multiple document summaries. Finally, we describe two user studies that test our models of multi-document summarization. <span class="math inline">-</span> Centroid-based summarization of multiple documents (abstract)</p>
</blockquote>
<section id="my-insights-2" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="my-insights-2">My insights:</h3>
<p>Clustering has its benefits:</p>
<ul>
<li>Each centroid corresponds a candidate topic.</li>
<li>Cluster size establishes a natural hierarchy for ranking topics.</li>
<li>Cluster centrality provides the a hierarchy for ranking sentence within topics.</li>
<li>The centroids may be used in a generative context, to bootstrap attention to each topic !?</li>
<li>A query similarity can used with the centroids to rank in response to a query (for Q&amp;A)</li>
</ul>
<hr>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="s17-lexrank.png" class="lightbox" data-glightbox="description: .lightbox-desc-8" data-gallery="quarto-lightbox-gallery-8" title="Lexrank"><img src="s17-lexrank.png" class="img-fluid figure-img" alt="Lexrank"></a></p>
<figcaption>Lexrank</figcaption>
</figure>
</div></div></section>
</section>
<section id="lexrank" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="lexrank">LexRank</h2>
<ul>
<li>Introduced in <span class="citation" data-cites="Erkan2004LexRankGL">(<a href="#ref-Erkan2004LexRankGL" role="doc-biblioref">Erkan and Radev 2004</a>)</span> <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>(https://www.cs.cmu.edu/afs/cs/project/jair/pub/volume22/erkan04a-html/erkan04a.html)</li>
<li>Graph based method.</li>
<li>Lexical centrality.</li>
</ul>
<div class="no-row-height column-margin column-container"><div id="ref-Erkan2004LexRankGL" class="csl-entry" role="listitem">
Erkan, Günes, and Dragomir R. Radev. 2004. <span>“LexRank: Graph-Based Lexical Centrality as Salience in Text Summarization.”</span> <em>ArXiv</em> abs/1109.2128. <a href="https://api.semanticscholar.org/CorpusID:506350">https://api.semanticscholar.org/CorpusID:506350</a>.
</div><p><sup>1</sup>&nbsp;page</p></div><hr>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="s18-lexrank-rank.png" class="lightbox" data-glightbox="description: .lightbox-desc-9" data-gallery="quarto-lightbox-gallery-9" title="lexrank rank"><img src="s18-lexrank-rank.png" class="img-fluid figure-img" alt="lexrank rank"></a></p>
<figcaption>lexrank rank</figcaption>
</figure>
</div></div><blockquote class="blockquote">
<p>We introduce a stochastic graph-based method for computing relative importance of textual units for Natural Language Processing. We test the technique on the problem of Text Summarization (TS). Extractive TS relies on the concept of sentence salience to identify the most important sentences in a document or set of documents. Salience is typically defined in terms of the presence of particular important words or in terms of similarity to a centroid pseudo-sentence. We consider a new approach, LexRank, for computing sentence importance based on the concept of eigenvector centrality in a graph representation of sentences. In this model, a connectivity matrix based on intra-sentence cosine similarity is used as the adjacency matrix of the graph representation of sentences. Our system, based on LexRank ranked in first place in more than one task in the recent DUC 2004 evaluation. In this paper we present a detailed analysis of our approach and apply it to a larger data set including data from earlier DUC evaluations. We discuss several methods to compute centrality using the similarity graph. The results show that degree-based methods (including LexRank) outperform both centroid-based methods and other systems participating in DUC in most of the cases. Furthermore, the LexRank with threshold method outperforms the other degree-based techniques including continuous LexRank. We also show that our approach is quite insensitive to the noise in the data that may result from an imperfect topical clustering of documents.</p>
</blockquote>
<hr>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="s19-lexrank-graph.png" class="lightbox" data-glightbox="description: .lightbox-desc-10" data-gallery="quarto-lightbox-gallery-10" title="lexrank graph"><img src="s19-lexrank-graph.png" class="img-fluid figure-img" alt="lexrank graph"></a></p>
<figcaption>lexrank graph</figcaption>
</figure>
</div></div><p>Idea:</p>
<p>similar to page rank where pages vote for each other:</p>
<ul>
<li>Create an adjacency matrix using cosine similarity.</li>
<li>Representing sentences as nodes in the graph</li>
<li>Connecting nodes based on inter-sentence cosine similarity matrix</li>
<li>uses <a href="https://en.wikipedia.org/wiki/Eigenvector_centrality">eigenvector centrality</a> from this matrix.</li>
<li>the sentence with the highest rank would be linked to many other important sentences. Are they very similar or not ?</li>
<li>a threshold is used to determine how many connected components should are used.</li>
</ul>
<section id="my-insights-3" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="my-insights-3">my insights:</h3>
<ol type="1">
<li>Algorithmically lexrank is a more sophisticated way of clustering like the MEAD algorithm. According to the paper, lexrank performed better.</li>
<li>Graph algorithms are computationally expensive for large graphs. This could mean that the approach would not scale.</li>
<li>To build the matrix they used a cosine similarity - but on using words. Replacing words with their embeddings should yield even better results with lower costs.</li>
<li>There are a number of centrality measures on graphs. A high eigenvector score means that a node is connected to many nodes who themselves have high scores. The paper looked at Degree, LexRank with threshold, and continuous LexRank. This is clearly a place where one may be able to do better.</li>
<li>TfiDf is another way to rank concepts.</li>
<li>a problem is that the underlying assumptions for creating the graphical models are difficult to justify. Building a graph from web pages using links seems natural while constructing a graph using similarity between sentences perhaps in different documents seems contrived. Sentences may capture several concepts and arguments may span several sentences. Similar sentences may have very different meaning and different sentences may have the same meaning.</li>
</ol>
<hr>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="s19-seq2seq.png" class="lightbox" data-glightbox="description: .lightbox-desc-11" data-gallery="quarto-lightbox-gallery-11" title="seq2seq"><img src="s19-seq2seq.png" class="img-fluid figure-img" alt="seq2seq"></a></p>
<figcaption>seq2seq</figcaption>
</figure>
</div></div><hr>
</section>
</section>
</section>
<section id="evaluation" class="level1 page-columns page-full">
<h1>Evaluation</h1>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="s22-information-content.png" class="lightbox" data-glightbox="description: .lightbox-desc-12" data-gallery="quarto-lightbox-gallery-12" title="Information Content"><img src="s22-information-content.png" class="img-fluid figure-img" alt="Information Content"></a></p>
<figcaption>Information Content</figcaption>
</figure>
</div></div><section id="what-makes-a-good-summary" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="what-makes-a-good-summary">What makes a good summary?</h2>
<ul>
<li>Goals:
<ul>
<li>Optimize topic coverage</li>
<li>Optimize readability</li>
</ul></li>
<li>Evaluation criteria:
<ul>
<li>Salience</li>
<li>Length</li>
<li>Structure and coherence</li>
<li>Balance</li>
<li>Grammar</li>
<li>Non-redundancy</li>
</ul></li>
<li>Types of evaluation methods
<ul>
<li>Extrinsic techniques
<ul>
<li>Task based</li>
<li>Can a person make the same decision with summary as with the entire document?</li>
</ul></li>
<li>Intrinsic techniques
<ul>
<li>Comparing summaries against gold standards</li>
</ul></li>
</ul></li>
</ul>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="s24-precision-recall.png" class="lightbox" data-glightbox="description: .lightbox-desc-13" data-gallery="quarto-lightbox-gallery-13" title="Precision &amp; Recall"><img src="s24-precision-recall.png" class="img-fluid figure-img" alt="Precision &amp; Recall"></a></p>
<figcaption>Precision &amp; Recall</figcaption>
</figure>
</div></div></section>
<section id="precision-and-recall" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="precision-and-recall">Precision and Recall</h2>
<p>starting with a contingency matrix we can get to:</p>
<p><span class="math display"> Precision =\frac{True_+}{ False_+ + True_+} </span></p>
<p><span class="math display"> Recall = \frac{True_+}{True_+ + False_-} </span></p>
<p>these can also be combined into an f-score is a harmonic mean of precision and recall.</p>
<section id="my-insights-4" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="my-insights-4">My insights</h3>
<p>Precision and Recall make more sense for IR settings, i.e.&nbsp;when we have a query.</p>
<hr>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="s24-utiliity.png" class="lightbox" data-glightbox="description: .lightbox-desc-14" data-gallery="quarto-lightbox-gallery-14" title="s24-utility"><img src="s24-utiliity.png" class="img-fluid figure-img" alt="s24-utility"></a></p>
<figcaption>s24-utility</figcaption>
</figure>
</div></div></section>
</section>
<section id="utility" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="utility">Utility</h2>
<ul>
<li>Utility is interesting from economic or game theoretic perspective. It indicates an option of applying RL</li>
<li>Utility is usually translated as a <strong>loss function</strong> in ML!</li>
</ul>
<hr>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="s25-pyramid.png" class="lightbox" data-glightbox="description: .lightbox-desc-15" data-gallery="quarto-lightbox-gallery-15" title="s25-pyramid"><img src="s25-pyramid.png" class="img-fluid figure-img" alt="s25-pyramid"></a></p>
<figcaption>s25-pyramid</figcaption>
</figure>
</div></div></section>
<section id="pyramid-method" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="pyramid-method">Pyramid method</h2>
<ul>
<li>Based on semantic content units</li>
<li>Used for multi-document summarization</li>
</ul>
<hr>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="s25-rougue.png" class="lightbox" data-glightbox="description: .lightbox-desc-16" data-gallery="quarto-lightbox-gallery-16" title="s25-rougue"><img src="s25-rougue.png" class="img-fluid figure-img" alt="s25-rougue"></a></p>
<figcaption>s25-rougue</figcaption>
</figure>
</div></div></section>
<section id="rouge-n" class="level2">
<h2 class="anchored" data-anchor-id="rouge-n">ROUGE-N</h2>
<ul>
<li>Based on Bleu (used for MT)</li>
<li>R stands for Recall (Recall-Oriented Understudy for Gisting Evaluation)</li>
<li>ROUGE-N metric compares an automatic summary with a set of reference summaries using the n-gram overlap between the documents</li>
</ul>
<p><span class="math display">
ROUGE_N - = \frac{\sum_{s\in S_H} \sum_{g_n \in S}C_m(g_n)}
                      {\sum_{s\in S_H} \sum_{g_n \in S}C(g_n) }
</span></p>
<ul>
<li><span class="math inline">S_H</span> is a set of manual summaries</li>
<li><span class="math inline">S</span> is an individual manual summary</li>
<li><span class="math inline">g_n</span> is a N-gram</li>
<li><span class="math inline">C(g_n)</span> is number of occurrences of gn in reference summaries</li>
<li><span class="math inline">C_m(g_n)</span> is number of co-occurrences of g_n in both reference and automatic summary</li>
</ul>
</section>
</section>
<section id="tools" class="level1">
<h1>Tools</h1>
<ul>
<li>the <a href="https://github.com/miso-belica/sumy">sumy</a> python library</li>
<li><a href="https://www.nltk.org/book/ch01.html">nltk summeriser</a></li>
<li><a href="https://spacy.io/universe/project/spacy-pytextrank/">spacy summeriser</a></li>
</ul>
</section>
<section id="data-sets" class="level1">
<h1>Data Sets</h1>
<ul>
<li><a href="https://catalog.ldc.upenn.edu/LDC2012T21">GIGAWORD dataset</a></li>
<li><a href="https://github.com/abisee/cnn-dailymail">CNN Daily</a></li>
<li><a href="http://kavita-ganesan.com/opinosis-opinion-dataset/#.XIgkSihKg2w">Opinions dataset</a></li>
</ul>


<div class="hidden" aria-hidden="true">
<span class="glightbox-desc lightbox-desc-1">mindmap</span>
<span class="glightbox-desc lightbox-desc-3">s8-luhn-method-1958</span>
<span class="glightbox-desc lightbox-desc-4">s9-luhn-method-formula</span>
<span class="glightbox-desc lightbox-desc-5">s10-edmundson-method</span>
<span class="glightbox-desc lightbox-desc-6">s12-FRUMP-demo</span>
<span class="glightbox-desc lightbox-desc-7">s16-Mead-Centroid</span>
<span class="glightbox-desc lightbox-desc-8">Lexrank</span>
<span class="glightbox-desc lightbox-desc-9">lexrank rank</span>
<span class="glightbox-desc lightbox-desc-10">lexrank graph</span>
<span class="glightbox-desc lightbox-desc-11">seq2seq</span>
<span class="glightbox-desc lightbox-desc-12">Information Content</span>
<span class="glightbox-desc lightbox-desc-13">Precision &amp; Recall</span>
<span class="glightbox-desc lightbox-desc-14">s24-utility</span>
<span class="glightbox-desc lightbox-desc-15">s25-pyramid</span>
<span class="glightbox-desc lightbox-desc-16">s25-rougue</span>
</div>

</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{bochman2021,
  author = {Bochman, Oren},
  title = {Automatic {Summarization} {Task}},
  date = {2021-04-24},
  url = {https://orenbochman.github.io/blog//posts/2021/2021-04-24-summerization/2021-04-24-summerization.html},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-bochman2021" class="csl-entry quarto-appendix-citeas" role="listitem">
Bochman, Oren. 2021. <span>“Automatic Summarization Task.”</span> April
24, 2021. <a href="https://orenbochman.github.io/blog//posts/2021/2021-04-24-summerization/2021-04-24-summerization.html">https://orenbochman.github.io/blog//posts/2021/2021-04-24-summerization/2021-04-24-summerization.html</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("^(?:http:|https:)\/\/www\.quarto\.org\/custom");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="OrenBochman/blogComments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 Copyright 2024, Oren Bochman
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../../about.html">
<p>About</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../../license.html">
<p>License</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../../trademark.html">
<p>Trademark</p>
</a>
  </li>  
</ul>
    <div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","openEffect":"zoom","selector":".lightbox","loop":false});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>




<script src="../../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>