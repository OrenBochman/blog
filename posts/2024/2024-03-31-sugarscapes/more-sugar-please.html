<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.557">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Oren Bochman">

<title>Oren Bochman’s Blog - More Sugar please</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../favicon.ico" rel="icon">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../../../site_libs/quarto-contrib/pseudocode-2.4.1/pseudocode.min.js"></script>
<link href="../../../site_libs/quarto-contrib/pseudocode-2.4.1/pseudocode.min.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>


<meta name="twitter:title" content="Oren Bochman’s Blog - More Sugar please">
<meta name="twitter:description" content="Personal website, portfolio and blog">
<meta name="twitter:image" content="https://orenbochman.github.io/posts/2024/2024-03-31-sugarscapes/thumbnail_blog.png">
<meta name="twitter:creator" content="@orenbochman">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar docked nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../images/logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Oren Bochman’s Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-about" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">about</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-about">    
        <li>
    <a class="dropdown-item" href="../../../about.html">
 <span class="dropdown-text">About</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-notes" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">notes</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-notes">    
        <li>
    <a class="dropdown-item" href="../../../nlp.html">
 <span class="dropdown-text">NLP Specilization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../dnn.html">
 <span class="dropdown-text">Neural Networks for Machine Learning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../model-thinking.html">
 <span class="dropdown-text">Model Thinking</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../xai.html">
 <span class="dropdown-text">XAI</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../rl.html">
 <span class="dropdown-text">Reinforcement Learning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../rhetoric.html">
 <span class="dropdown-text">Rhetoric</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../tfp.html">
 <span class="dropdown-text">TFP</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../ab-testing.html">
 <span class="dropdown-text">AB testing</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../cognitiveai.html">
 <span class="dropdown-text">Cognitive AI</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/orenbochman"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-github" role="button" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-bi-github">    
        <li>
    <a class="dropdown-item" href="https://github.com/OrenBochman/blog">
 <span class="dropdown-text">Source Code</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/OrenBochman/blog/issues">
 <span class="dropdown-text">Report a Bug</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="../../../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../archive.html"> <i class="bi bi-archive" role="img">
</i> 
<span class="menu-text">Archive</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">More Sugar please</li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">More Sugar please</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">sugarscape</div>
                <div class="quarto-category">multi-agent simulation</div>
                <div class="quarto-category">agent-based modeling</div>
                <div class="quarto-category">agent-based social simulation</div>
                <div class="quarto-category">multi-agent reinforcement learning</div>
                <div class="quarto-category">sequential social dilemmas</div>
                <div class="quarto-category">cooperation</div>
                <div class="quarto-category">Markov games</div>
                <div class="quarto-category">non-cooperative games</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Oren Bochman </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">Tuesday, June 11, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#amazing-landscapes" id="toc-amazing-landscapes" class="nav-link active" data-scroll-target="#amazing-landscapes">Amazing landscapes</a>
  <ul class="collapse">
  <li><a href="#sandpile-sugarscape" id="toc-sandpile-sugarscape" class="nav-link" data-scroll-target="#sandpile-sugarscape">SandPile Sugarscape</a></li>
  <li><a href="#xland-sugarscape" id="toc-xland-sugarscape" class="nav-link" data-scroll-target="#xland-sugarscape">Xland Sugarscape</a></li>
  </ul></li>
  <li><a href="#ecological-sugarscape" id="toc-ecological-sugarscape" class="nav-link" data-scroll-target="#ecological-sugarscape">Ecological Sugarscape</a>
  <ul class="collapse">
  <li><a href="#floods-come-to-sugarscape" id="toc-floods-come-to-sugarscape" class="nav-link" data-scroll-target="#floods-come-to-sugarscape">Floods come to Sugarscape</a></li>
  <li><a href="#kinship-comes-to-sugarscape" id="toc-kinship-comes-to-sugarscape" class="nav-link" data-scroll-target="#kinship-comes-to-sugarscape">Kinship comes to Sugarscape</a></li>
  <li><a href="#social-capital-reputaion-prestige-comes-to-sugarscape" id="toc-social-capital-reputaion-prestige-comes-to-sugarscape" class="nav-link" data-scroll-target="#social-capital-reputaion-prestige-comes-to-sugarscape">Social capital, Reputaion &amp; Prestige comes to Sugarscape</a></li>
  </ul></li>
  <li><a href="#reproduction-rule-variants" id="toc-reproduction-rule-variants" class="nav-link" data-scroll-target="#reproduction-rule-variants">Reproduction rule variants</a>
  <ul class="collapse">
  <li><a href="#asexual-reproduction-comes-to-sugarscape." id="toc-asexual-reproduction-comes-to-sugarscape." class="nav-link" data-scroll-target="#asexual-reproduction-comes-to-sugarscape.">Asexual reproduction comes to sugarscape.</a></li>
  <li><a href="#haploid-reproduction-comes-to-sugarscape" id="toc-haploid-reproduction-comes-to-sugarscape" class="nav-link" data-scroll-target="#haploid-reproduction-comes-to-sugarscape">Haploid reproduction comes to sugarscape</a></li>
  <li><a href="#child-rearing-comes-to-sugarscape" id="toc-child-rearing-comes-to-sugarscape" class="nav-link" data-scroll-target="#child-rearing-comes-to-sugarscape">Child rearing comes to Sugarscape</a></li>
  <li><a href="#ancestors-can-expand-resourcestime-to-nature-their-progenydescendants." id="toc-ancestors-can-expand-resourcestime-to-nature-their-progenydescendants." class="nav-link" data-scroll-target="#ancestors-can-expand-resourcestime-to-nature-their-progenydescendants.">ancestors can expand resources/time to nature their progeny/descendants.</a></li>
  <li><a href="#language-comes-to-sugarscape" id="toc-language-comes-to-sugarscape" class="nav-link" data-scroll-target="#language-comes-to-sugarscape">Language comes to Sugarscape</a></li>
  <li><a href="#information-comes-to-sugarscape" id="toc-information-comes-to-sugarscape" class="nav-link" data-scroll-target="#information-comes-to-sugarscape">Information comes to Sugarscape</a></li>
  </ul></li>
  <li><a href="#economic-ideas" id="toc-economic-ideas" class="nav-link" data-scroll-target="#economic-ideas">Economic Ideas</a>
  <ul class="collapse">
  <li><a href="#specilization-comes-to-sugarscape---specilization-i" id="toc-specilization-comes-to-sugarscape---specilization-i" class="nav-link" data-scroll-target="#specilization-comes-to-sugarscape---specilization-i">Specilization comes to Sugarscape - Specilization I</a></li>
  <li><a href="#art-comes-to-sugarscape---specilization-ii" id="toc-art-comes-to-sugarscape---specilization-ii" class="nav-link" data-scroll-target="#art-comes-to-sugarscape---specilization-ii">Art comes to Sugarscape - Specilization II</a></li>
  <li><a href="#artifacts-comes-to-sugarscape---specilization-iii" id="toc-artifacts-comes-to-sugarscape---specilization-iii" class="nav-link" data-scroll-target="#artifacts-comes-to-sugarscape---specilization-iii">Artifacts comes to sugarscape - Specilization III</a></li>
  </ul></li>
  <li><a href="#trade-rule-variants" id="toc-trade-rule-variants" class="nav-link" data-scroll-target="#trade-rule-variants">Trade rule variants</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">





<p>In Sugar ad Astra I covered some research questions I had about Sugarscape. In this post I’d like to consider some ideas I have for extending sugarscape.</p>
<p>Some ideas are about extending the environment to add more emergent properties. Other ideas are more about agents learning to generalize about the environment byt providing a richer and more complex environment to handle.</p>
<section id="amazing-landscapes" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="amazing-landscapes">Amazing landscapes</h2>
<section id="sandpile-sugarscape" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="sandpile-sugarscape">SandPile Sugarscape</h3>
<p>In the paper <span class="citation" data-cites="Bak1988SelforganizedC">(<a href="#ref-Bak1988SelforganizedC" role="doc-biblioref">Bak, Tang, and Wiesenfeld 1988</a>)</span> the authors introduced the abelian sandpile model. In it they showed that a simple model of sandpile could generate complex landscapes. We could use this mode to generate the landscape of sugarscape. In this version rigion with sugar are created by dropping sugar on the landscape. The sugar will pile up in some regions and create hills and valleys. The agents will then need to navigate this complex landscape to gather resources. If they are not careful they might fall into a valley and be unable to get out. If they are unlucky they might be caught in a landslide and be buried in sugar.</p>
<div class="no-row-height column-margin column-container"><div id="ref-Bak1988SelforganizedC" class="csl-entry" role="listitem">
Bak, P., Chao Tang, and K. Wiesenfeld. 1988. <span>“Self-Organized Criticality.”</span> <em>Physical Review. A, General Physics</em> 38 1: 364–74.
</div></div></section>
<section id="xland-sugarscape" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="xland-sugarscape">Xland Sugarscape</h3>
<p>The paper <span class="citation" data-cites="Team2021OpenEndedLL">(<a href="#ref-Team2021OpenEndedLL" role="doc-biblioref">Team et al. 2021</a>)</span> described a new approach to learning called Open-Ended Learning. In it an functional genrated environment was descibed called Xland. I think that one way to make sugarscape more more challanding is by composing more complex landscapes.</p>
<div class="no-row-height column-margin column-container"><div id="ref-Team2021OpenEndedLL" class="csl-entry" role="listitem">
Team, Open-Ended Learning, Adam Stooke, Anuj Mahajan, C. Barros, Charlie Deck, Jakob Bauer, Jakub Sygnowski, et al. 2021. <span>“Open-Ended Learning Leads to Generally Capable Agents.”</span> <em>ArXiv</em> abs/2107.12808.
</div></div><p>Xland uses Quantum Wave Collapse algorithm to generate 3d landscapes. This is a type of procedural generation.</p>
<p>When a the agents needs to navigate a complex lanscape to gather resources survival becomes more challenging. This in can lead to more importance for trade between agent and even between communities. If things get really tough agents might prefer combat to trade.</p>
<ul>
<li>A more complex landscape might also include more layers than Xland.</li>
<li>Different layers could correspond to different (mineral or farming) resources.</li>
</ul>
</section>
</section>
<section id="ecological-sugarscape" class="level2">
<h2 class="anchored" data-anchor-id="ecological-sugarscape">Ecological Sugarscape</h2>
<ul>
<li><p>Adding to the landscapes tiles for different biomes to the xland landscape at different elevations.</p></li>
<li><p>An ecology is a complex system of interdependent organisms.</p></li>
<li><p>We can model this using a predator-prey models The different biomes have animals in a predator-prey relationship. They keep the population of each other in check and husband the resources of the land.</p>
<p>Thier populations are governed by lekrotta-volterra differntial equations.</p>
<p>Such Pairs might be:</p>
<ul>
<li>For glaciers: Yettis and penguins</li>
<li>For mountains: Eagles and</li>
<li>For rivers: Bears and salmon</li>
<li>For lakes: Kingfishers and fish</li>
<li>For islands: Sharks and Seals</li>
<li>For deserts: Snakes, scorpions and spiders</li>
<li>For forests: Wolves and deer and rabbits</li>
<li>For swamps: Alligators and frogs and flies</li>
<li>For caves: Bats and insects<br>
</li>
<li>For volcanoes: Lava and rocks (credit: to <span class="citation" data-cites="GH-Copilot">(<a href="#ref-GH-Copilot" role="doc-biblioref"><strong>GH-Copilot?</strong></a>)</span> for this one)</li>
<li>For plains: Lions and wildebeest</li>
<li>For Savannah: Elephants and antelopes</li>
</ul>
<p>As one is hunted e.g.&nbsp;stag hunt targetting deer will boost the numbers of rabbits if the number of deer is too small they might be decimated by wolves and the rabbits. One of both of these may emerge from thier habitat and attack the agents or thier crops.</p>
<ul>
<li>Agents would need to learn a model of the ecology to avoid disrupting it.</li>
<li>Agent could hunt stags, wolves and rabbits in proportion to thier population.
<ul>
<li>Hunting wolves is risky</li>
<li>Hunting rabbits means defaulting in a stag hunt with loss of reputation.</li>
</ul></li>
<li>Agents might learn to domesticate wolves, deer and rabbits.</li>
</ul>
<p>If agent disrupts the ecology they might find themselves facing any number of ecological disasters.</p>
<ul>
<li>A plague of locusts might eat all the crops.</li>
<li>A plague of rats might consume all their stores of sugar.</li>
<li>A flight of bats might start a pandemic.</li>
<li>Cutting down trees might lead to deforestation, erosion and desertification.
<ul>
<li>erosion would remove the river and can increase risks of a flood.</li>
<li>erosion would reduce the carrying capacity of the land by reducing max_growth to 3</li>
<li>this would elimanate the salmon and enrages the bears.</li>
<li>bears are almost impossible to hunt and will attack agents and their livestock.</li>
<li>bear hunt requires a coordinated effort of agents to drive the bear into a trap.</li>
<li>deforestation would reduce the carrying capacity of the land by reducing max_growth to 2</li>
<li>desertification would reduce the carrying capacity of the land by reucing max_growth to</li>
</ul></li>
</ul></li>
<li><p>Each biome might have supply different resources as well as different challenges.</p></li>
<li><p>Agents must learn how each biomes operates to survive and possibly increase its yields.</p></li>
<li><p>Cutting down certain trees might reduce the risk of fire in a forest biome.</p></li>
<li><p>Cutting down others might lead to deforestation, erosion and desertification.</p></li>
<li><p>Hunting can create a food source, furs, and bones for tools</p></li>
<li><p>Hunting can also lead to burst in the growth of undesired species that will target crops,<br>
attack ther agents and spread desease.</p>
<ul>
<li>Can agents learn to balance their burgeoning society within a complex ecology?</li>
<li>Can they learn to harvest wild resources sustainably?</li>
<li>Can they learn to manage the environment to increase the carrying capacity of the land, without disrupting the ecology?</li>
<li>Can they learn to hunt without causing the extinction of the prey or it’s predators?</li>
<li>Agent that disrupt habitats may introduce a pandemic.</li>
<li>Cutting down trees can lead to deforestation, reduction of rain, fires and famine.</li>
<li>Over fishing can lead to the extinction of fish species.</li>
<li>Can they domesticate animals? -Raising too many cattle can lead to desertification.</li>
</ul></li>
<li><p>Nature could be made less and less forgiving to our agents.</p>
<ul>
<li>droughts, fires, floods, hurricanes, tsunamies, earthquakes, avalanches, mudslides, etc.</li>
<li>plagues of locusts, rats, bats, that eat crops if their predetors are killed.</li>
<li>invasive species like weeds or kazoo that might replace the crops.
<ul>
<li>specialists might emerge that can clean these up.</li>
<li>if the root cause is not mitigated the specialists might become a pest and a coordinated clean up the environment would be needed by agents.</li>
<li>the area might need a fire to completely burn out the invasive species.</li>
<li>pollution would then be generated forcing agents to relocate until it dissipates.</li>
</ul></li>
<li>apex predators that will emerge to prey on agents and thier livestock if their territory is encroached upon.</li>
<li>resources generating land can become less fertile if surrounding ecology is disrupted.</li>
</ul></li>
</ul>
<section id="floods-come-to-sugarscape" class="level3">
<h3 class="anchored" data-anchor-id="floods-come-to-sugarscape">Floods come to Sugarscape</h3>
<ul>
<li><p>It is fairly easy to add a elevation to the environment. We can then use the elevation and a threshold to define a water level. When it rains water level rises. Some ideas about rainfall:</p></li>
<li><p>Rainfall is local and seasonal so there might be a lake in a mountains with higher water level then say a sea at the lowest elevation.</p></li>
<li><p>Mountains of high eleveation might have snow that generates a source of water.</p></li>
<li><p>Water from a lake might flow to a lower elevation by creating a river.</p></li>
<li><p>Water levels drop if rain stops.</p></li>
<li><p>Agents might drown if they are in a cell with water level above a certain threshold.</p></li>
<li><p>Agents might also be able to swim.</p></li>
<li><p>Agents might be able to build boats - Operating the boat requires two or more agents who must learn to cooperate and coordinate to move the boat.</p></li>
<li><p>Agents could cooperate to build dams, thus control water flow away from regions of greatest yield. This is a public good which would increase the world’s carrying capacity.</p>
<ul>
<li>four agents are needed to build the dam.</li>
<li>the must burn k sugar into caramel to construct the dam.</li>
</ul></li>
<li><p>Agents might be able to build bridges. which might decrease the cost of movement, and give access to needed resources, a second public good game.</p></li>
<li><p>Agents might be able to build canals - these might together with boats would allow more efficient drainage and trading with boats along the canal, a public goods game. If there are many resources a canal system might be needed to allow agents trade efficently so as to survive</p></li>
<li><p>After a flood Agents might need to cooperate to drain an area to restore land to harvest it to full capacity.</p>
<ul>
<li>Land with lower elevation nearby will drain automatically by one unit for each lower elevation land.</li>
<li>land next to fully drained land will drain by one unit.</li>
<li>restoring land farming capacity at a rate of k per time step.</li>
<li>Land with with no lower elevation will need to be drained by agents.</li>
<li>Land with higher elevation will need to be drained by agents.</li>
<li>Draining will require three agent to stand together on three sides of the cell to drain it to the open side.</li>
<li>Draining will require a certain amount of time. At this time free loaders may use the cleared land to harvest resources. Idealy though the agents should switch roles or better yet share the reources harvested in some way while draining is going on.</li>
<li>We can complicate this by making the draining move water from one cell to another until it is pushed to a lower elevation. More agent participate they can drain the area faster. This is a stag hunt game. However as more areas are drained agents might prefer/need to harverst.</li>
<li>Eventual there may be more land then agent so that there is no immediate benefits to draining.</li>
<li>Draining might be done might need to be done in a coordinated way to avoid flooding other areas. Draining might need to be a stag hunt game where two to four agents must coordinate to drain the area. All must stand on different sides to drain the area.</li>
</ul></li>
<li><p>Seasonal flooding can be added by adding a rule that increases the height of water creating islands and complicating movement.</p></li>
</ul>
</section>
<section id="kinship-comes-to-sugarscape" class="level3">
<h3 class="anchored" data-anchor-id="kinship-comes-to-sugarscape">Kinship comes to Sugarscape</h3>
<p>The book discusses culture and friend networks. However, besides considering how these night emerge from the rules, it does not consider how they might influence the evolution of the state. I propose to define a more extensions set of kinship relations and to create two mechanisms by which kinship might influence the evolution of the state. I.e. how kinips interacts with other rules.</p>
<ul>
<li>agent will be aware of relatedness of other agent. This will be a number 1,2,4,,8</li>
<li>1 means they are identical twins, 2 means they are siblings, 4 for cousins, 8 for</li>
</ul>
<p>once kinship ties are available we can have more fine grained social groups.</p>
<ul>
<li>progeny</li>
<li>atomic family</li>
<li>extended family</li>
<li>tribe</li>
<li>top-k-friends (k agents that were in FOV longest)</li>
<li>culture</li>
<li>we may tie other rules to operate within kinship groups via a constraint on the rule.</li>
<li>we may tiw behaviour to kinship groups via terms in the utility function that are shared by members of the group.</li>
</ul>
</section>
<section id="social-capital-reputaion-prestige-comes-to-sugarscape" class="level3">
<h3 class="anchored" data-anchor-id="social-capital-reputaion-prestige-comes-to-sugarscape">Social capital, Reputaion &amp; Prestige comes to Sugarscape</h3>
<dl>
<dt>Social capital</dt>
<dd>
<p>is a measure of the value of an individual’s social network. It defines the social resources that an individual has access to. Agent with more social capital can get more done. Social capital can be used to get access to resources, information.</p>
</dd>
<dt>Social trust</dt>
<dd>
<p>this is a the trust between two agents. Agents that have not interacted have no ties. Aganets that have positive interactions have strong positive ties Agents that gave negative interactions have strong negative ties. Social trust increases the chance of future cooperation between agents. (For a trade, a public good game, etc an agent will priorotize cooperate with agents they trust.) Trust might become an element of the utility function controlling movement.</p>
</dd>
<dt>Social prestige or Reputation</dt>
<dd>
<p>this is an aggregate measure of the social trust that an individual has. It is a measure of the respect and admiration that an individual has in a society. Social prestige indicates that an agent has access to more social capital than some other individuals.</p>
</dd>
</dl>
<p>Complex dillema tasks: - We may introduce complex tasks that require coordination between many agent for the group to survive and thrive. - a flood might require agents to drain an area to restore land to harvest it to full capacity. - an avalanche might require agents to dig out a buried agent quickly. - a fire might require agents to build a fire break to save thier crops. - a war might require agents to coordinate to defeat a stronger enemy. - a shortage of resources might require agents to coordinate to share resources. - group trades might be required when the group exceeds the carrying capacity of the land. - a public good might be required to increase the carrying capacity of the land. - a boat might need three agents to operate. - two rowers and a time keeper. - access to certain resources might require fabricating tools artifacts by specialists. - in a dragon slaying quest a leader might need to mobilize a team of specialists - some wealty patron to finance the quest - a sword smith, a armorer, to outfit fighers - a ranger to find the layer, - k pages to locate keys to open the doors to the dragon’s lair - a knight access the dragon’s lair and then fight it. - each time step the dragon might return and attack a tribe member or cause a fire, reducing the tribe’s carrying capacity. - in games of environtal cleanup agents might need to coordinate to most effectively harvest and clean up thier environment.</p>
<p>Thus in general being righ isn’t enough, an effective leader must be able to marshal resources and mobilize a team of allies to get the job done. The agents would also need to plan to get the task done. This would require a more complex decision making process</p>
<p>So we might have simulation where agents just focus on one complex task like in the minigrid environment. Then one might add bridge building curribculum learning, bridge building, cleanup, stag hunt, etc.</p>
<p>Complex tasks might require coordination between coalitions of agents. More so when the tasks might also require access mobilizing a diverse network of resources, by specilist agents then we can see how social capital might be beneficial.</p>
<p>require access to scarce resources. A diverse network of social ties might be beneficial in such a case. Agents with more social capital can get more done. Social capital can be used to get access to resources, information, and social prestige. Social prestige is a measure of the respect and admiration that an individual has in a society. It is a measure of the social capital that an individual has.</p>
<p>Agents with more social prestige can get more done. Social prestige can be used to get access to resources, information, and social prestige. Social prestige is a measure of the respect and admiration that an individual has in a society. It is a measure of the social capital that an individual has.</p>
<p>Agents with more social prestige can get more done. Social prestige can be used to get access to resources, information, and social prestige. Social prestige is a measure of the respect and admiration that an individual has in a society. It is a measure of the social capital that an individual has.</p>
<p>Agents that have and social prestige. Social prestige is a measure of the respect and admiration that an individual has in a society. It is a measure of the social capital that an individual has.</p>
<p>Leadership can arise from different factors. In this case we consider a simple model where leadership is determined by social prestige.</p>
<p>Another idea might be to base leadership on social capital. This can be more intersting if agents liked and disliked each other for different reasons creating a more complex social network. Agents score other agents based on thier past interactions. E.g. Agents that warned others of danger might get a higher score. Agents that cry wolf would get a lower score. The strength of ties would then become a basis for cooperation between agents. Agents with a pristine reputation would be more likely to be trusted by other agents. Presence of such agents might be beneficial in setting public goods games.</p>
<p>How does social prestige arise - it can be based on wealth, age, number of progeny, number of friends, number of followers, number of trades, number of battles won, taking risks for the group, sharing resources, sharing information, participating in public goods games, etc.</p>
<ul>
<li><p>leaders with the most prestige should be able to make decisions that affect the group. Idealy these decision should be made localy in a way that the that the group can only achieve the goal and get the benefits by working together. This can allow the benefits of having a leader.</p></li>
<li><p>wolfpack stughunt mini-games. agents must form a wolfpack to hunt a stag.</p>
<p>Make a group trade, like if to trade with other cultures if to go to war,</p></li>
</ul>
<p>In this case I would like to add a rules that quickly set up well known social hierarchies.</p>
<ul>
<li>monarchy where the leadership is passed down from the oldest agent to their oldest direct descendant.</li>
<li>autocarcy where the strongest agent beomes the leader.</li>
<li>communism where there is no leader but all resources are shared.</li>
<li>gerontocracy where the oldest agent in a group is the leader.</li>
<li>matriarchy where the oldest living female ancestor is the leader.</li>
<li>patriarchy where the oldest living male ancestor is the leader.</li>
<li>plutocracy where the wealthiest agent is the leader.</li>
<li>oligarchy where agents with the most wealth can use it to gain social prestige. The can share excess resources with others in FOV in exchange for social prestige. Nearby agents should be typically be wealthy too so the process could diffuse to the whole group. Sharing wealth can be via gifts or loans. Gifting might take place in the following heuristic - after you have enough food to survive for k years give all excess to the poorest agent in your FOV. If all agents in FOV have food for k-years collect enough food for k+1 years. This would be a public good game. It should also lead to higher carrying capacity of the world. Oligarchs that finance the lion’s share of a public works should get the lion’s share of social prestige. This would in turn make them more likely to retain their wealth. Oligarchs might get social prestige for writing off a debts. Oligarchs who are significantly wealthier than others many individuals in thier FOV could also lose social prestige. Since they are not sharing thier wealth. This would mean that in an afluent society the oligarchs might want to have many children also agents that have children might get large benefits by being next to other oligarcs who would be more likely to share ther wealth with them after giving birth. This might make raising children a type of public good game….</li>
<li>Democracy where agents vote on group descions. This could be a simple majority vote.
<ul>
<li>voting takes place in a neighborhoods</li>
<li>voting within FOV</li>
<li>voting within tribe neighborhood</li>
<li>voting within culture neighborhood</li>
<li>voting within a db-scan cluster.</li>
<li>agents vote are a function of friendship ties, kinshop ties and social prestige.</li>
</ul></li>
<li>meritocracy where greatest ability and initiative are rewarded with leadership.</li>
<li>theocracy where the agent with the most religious prestige is the leader.</li>
</ul>
<p>leadership should have some advantages over non-leaders. This could be in the form of - access to more information - ability to make group trades - ability to allocate roles - in a group task like draining a flooded area. - send agents to explore - send agents to trade - send agents to war - send agents to build a public good - send agents to harvest different resources</p>
<ul>
<li>in this case all agents that comply with the leader’s request should get social prestige.</li>
<li>ability to make group decisions like
<ul>
<li>going to war or making peace with another group.</li>
<li>trade with another group.</li>
</ul></li>
</ul>
<p>It would be more interesting if leadership arose by one or a combinations of social prestidge, martial prowess and wealth.</p>
<p>also by economic power. This would allow for a more complex social structure where leaders can be challenged by other agents. This would be a public goods game where agents would need to cooperate to challenge the leader. This would be a</p>
</section>
</section>
<section id="reproduction-rule-variants" class="level2">
<h2 class="anchored" data-anchor-id="reproduction-rule-variants">Reproduction rule variants</h2>
<section id="asexual-reproduction-comes-to-sugarscape." class="level3">
<h3 class="anchored" data-anchor-id="asexual-reproduction-comes-to-sugarscape.">Asexual reproduction comes to sugarscape.</h3>
<ul>
<li>agent with an asex_counter&gt;0 can reproduce asxually - decremnting the counter, splitting resources and reducing thier age.
<ul>
<li>splitting has a counter and the abilty is lost</li>
</ul></li>
<li>this can only be done a finite number of time. Thus if an agent with max age 100 can split 5 times. He can live till 5*50+50=300</li>
<li>at which point he will have 32 syblings all age 300 so he has lived 3600 year. In between he may have also reproduced sexually.</li>
<li>this makes all his progeny subject to inderitance rule.</li>
</ul>
</section>
<section id="haploid-reproduction-comes-to-sugarscape" class="level3">
<h3 class="anchored" data-anchor-id="haploid-reproduction-comes-to-sugarscape">Haploid reproduction comes to sugarscape</h3>
<ul>
<li>kinship rules based on social insects are introduced here.
<ul>
<li>queens, sister-workers, warrior-males, etc</li>
</ul></li>
<li>higher kinship should confer altruism in trade</li>
<li>higher kinship should confer altruistic sharing of information.</li>
</ul>
</section>
<section id="child-rearing-comes-to-sugarscape" class="level3">
<h3 class="anchored" data-anchor-id="child-rearing-comes-to-sugarscape">Child rearing comes to Sugarscape</h3>
<ul>
<li>we start by adding progeny welfare into an agents utility.</li>
<li>we could have an exponent payoffs for progeny that falls to a min on reaching puberty.</li>
<li>we could add this to grandparents.</li>
<li>we could penalize ancestors whose children are out of vision.</li>
</ul>
</section>
<section id="ancestors-can-expand-resourcestime-to-nature-their-progenydescendants." class="level3">
<h3 class="anchored" data-anchor-id="ancestors-can-expand-resourcestime-to-nature-their-progenydescendants.">ancestors can expand resources/time to nature their progeny/descendants.</h3>
<ol type="1">
<li>teaching a language by talking. children learn a language by talking with nearby agents.
<ul>
<li>parent can speed this up by talking to their children.</li>
<li>This will also impart their culture for free.</li>
</ul></li>
<li>after teaching the language the parent can teach their children to trade, fight. etc. this will change the probability of a successful transitions to a reward in these actions.</li>
<li>bootstrap their priors by talking to them.</li>
<li>bootstrap their neural networks by transferring weights.</li>
</ol>
</section>
<section id="language-comes-to-sugarscape" class="level3">
<h3 class="anchored" data-anchor-id="language-comes-to-sugarscape">Language comes to Sugarscape</h3>
<ul>
<li>agent can communicate
<ul>
<li>rss in their view</li>
<li>agent in their view</li>
<li>prices in their view</li>
<li>strategies</li>
</ul></li>
<li>value of info = payoffs of action with info - payoffs of action without info
<ul>
<li>trading in information.</li>
</ul></li>
<li>memory should have costs</li>
</ul>
<p>to communicate agents must be in FOV. they first need to learn a signaling system. they can also learn communication protocol they can also learn a grammar to allow a complex signaling system. This can be used to trade information. Agents can trade information about the world. This can be used to coordinate actions, trade, etc.</p>
</section>
<section id="information-comes-to-sugarscape" class="level3">
<h3 class="anchored" data-anchor-id="information-comes-to-sugarscape">Information comes to Sugarscape</h3>
<p>with a signaling systems agents can exchange information about the world. This can be used to coordinate actions, trade, etc.</p>
<p>information can be traded for resources, social prestige, etc.</p>
</section>
</section>
<section id="economic-ideas" class="level2">
<h2 class="anchored" data-anchor-id="economic-ideas">Economic Ideas</h2>
<section id="specilization-comes-to-sugarscape---specilization-i" class="level3">
<h3 class="anchored" data-anchor-id="specilization-comes-to-sugarscape---specilization-i">Specilization comes to Sugarscape - Specilization I</h3>
<ul>
<li>each agent has either a probability of success or an output level associated with thier abilities.</li>
<li>agents who specilize can generate greater wealth and then trade for the missing commodeties.</li>
<li>agents can also learn to trade thier specilized goods for other goods.</li>
</ul>
</section>
<section id="art-comes-to-sugarscape---specilization-ii" class="level3">
<h3 class="anchored" data-anchor-id="art-comes-to-sugarscape---specilization-ii">Art comes to Sugarscape - Specilization II</h3>
<p>Art is like artifacts allowing occupational specialization without conferring special intrinsics it can be traded in a Kulla ring system where the art is passed around the group gaining value as it is passed around. It might confer social prestige to its current owner.</p>
<p>There are as many type of art as that of artists. Artist can charge more for new art. The value is based on the value of their previous art and the number of art they have created.</p>
</section>
<section id="artifacts-comes-to-sugarscape---specilization-iii" class="level3">
<h3 class="anchored" data-anchor-id="artifacts-comes-to-sugarscape---specilization-iii">Artifacts comes to sugarscape - Specilization III</h3>
<ul>
<li>agents can have a probability of success in harvesting different resources</li>
<li>agents that can create less pollution when harvesting</li>
<li>agents that are better at combat</li>
<li>agents that are better at trade</li>
<li>agents can create artworks that can be traded.
<ul>
<li>art confers social prestige</li>
<li>art is traded in a kulla ring system where the art is passed around the group gaining value as it is passed around.</li>
</ul></li>
<li>agents can create artifacts that can be traded
<ul>
<li>artifacts can be traded for resources and social prestige</li>
<li>artifacts may confer an intinsic bonus</li>
<li>artifacts may be needed to achieve goals
<ul>
<li>glasses can boost FOV.</li>
<li>a telescope gives a bigger boost.</li>
<li>a fan might slow down metabolism.</li>
<li>fertility artifacts may be needed to reproduce</li>
<li>a shovel might speed up draining a flooded area</li>
<li>weapons and armor could boost chance to win battles</li>
<li>love potion may be needed to reproduce with a specific mate.</li>
<li>an artifact may be needed to build a boat</li>
<li>a key may be needed to access a new area</li>
<li>artifacts may be needed to build other artifacts</li>
<li>shoes might speed up movement/reduce metabolic costs</li>
<li>a map might be used to keep track of high resources regions</li>
<li>lexicon might be used to quickly learn the new signaling systems of other cultures once the first signaling system is learned.</li>
</ul></li>
<li>artifacts may be needed to build a dam, channel, bridge, boar, etc.</li>
</ul></li>
<li>agents can have a probability of success in combat</li>
</ul>
</section>
</section>
<section id="trade-rule-variants" class="level2">
<h2 class="anchored" data-anchor-id="trade-rule-variants">Trade rule variants</h2>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{bochman2024,
  author = {Bochman, Oren},
  title = {More {Sugar} Please},
  date = {2024-06-11},
  url = {https://orenbochman.github.io//posts/2024/2024-03-31-sugarscapes/more-sugar-please.html},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-bochman2024" class="csl-entry quarto-appendix-citeas" role="listitem">
Bochman, Oren. 2024. <span>“More Sugar Please.”</span> June 11, 2024. <a href="https://orenbochman.github.io//posts/2024/2024-03-31-sugarscapes/more-sugar-please.html">https://orenbochman.github.io//posts/2024/2024-03-31-sugarscapes/more-sugar-please.html</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("^(?:http:|https:)\/\/www\.quarto\.org\/custom");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="OrenBochman/blogComments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 Copyright 2024, Oren Bochman
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../../about.html">
<p>About</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../../license.html">
<p>License</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../../trademark.html">
<p>Trademark</p>
</a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>
    <script type="text/javascript">
    (function(d) {
      d.querySelectorAll(".pseudocode-container").forEach(function(el) {
        let pseudocodeOptions = {
          indentSize: el.dataset.indentSize || "1.2em",
          commentDelimiter: el.dataset.commentDelimiter || "//",
          lineNumber: el.dataset.lineNumber === "true" ? true : false,
          lineNumberPunc: el.dataset.lineNumberPunc || ":",
          noEnd: el.dataset.noEnd === "true" ? true : false,
          titlePrefix: el.dataset.algTitle || "Algorithm"
        };
        pseudocode.renderElement(el.querySelector(".pseudocode"), pseudocodeOptions);
      });
    })(document);
    (function(d) {
      d.querySelectorAll(".pseudocode-container").forEach(function(el) {
        titleSpan = el.querySelector(".ps-root > .ps-algorithm > .ps-line > .ps-keyword")
        titlePrefix = el.dataset.algTitle;
        titleIndex = el.dataset.chapterLevel ? el.dataset.chapterLevel + "." + el.dataset.pseudocodeIndex : el.dataset.pseudocodeIndex;
        titleSpan.innerHTML = titlePrefix + " " + titleIndex + " ";
      });
    })(document);
    </script>
  




<script src="../../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>