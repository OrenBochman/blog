<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Oren Bochman">

<title>Oren Bochman’s Blog - Mesa Lessons</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script> 
  
<style>html{ scroll-behavior: smooth; }</style>


<meta name="twitter:title" content="Oren Bochman’s Blog - Mesa Lessons">
<meta name="twitter:description" content="Personal website, portfolio and blog">
<meta name="twitter:image" content="https://orenbochman.github.io/posts/2024/2024-3-31-sugarscapes/thumbnail_blog.png">
<meta name="twitter:creator" content="@orenbochman">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../images/logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Oren Bochman’s Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-book" role="button" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-book" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-bi-book">    
        <li>
    <a class="dropdown-item" href="../../../notes.html">
 <span class="dropdown-text">All Notes</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../nlp.html">
 <span class="dropdown-text">NLP Specilization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../dnn.html">
 <span class="dropdown-text">Neural Networks for Machine Learning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../model-thinking.html">
 <span class="dropdown-text">Model Thinking</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../xai.html">
 <span class="dropdown-text">XAI</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../rl.html">
 <span class="dropdown-text">rl</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../rhetoric.html">
 <span class="dropdown-text">rhetoric</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../tfp.html">
 <span class="dropdown-text">TFP</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../ab-testing.html">
 <span class="dropdown-text">AB testing</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../cognitiveai.html">
 <span class="dropdown-text">cognitive AI</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/orenbochman"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-github" role="button" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-bi-github">    
        <li>
    <a class="dropdown-item" href="https://github.com/OrenBochman/blog">
 <span class="dropdown-text">Source Code</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/OrenBochman/blog/issues">
 <span class="dropdown-text">Report a Bug</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="../../../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../archive.html"> <i class="bi bi-archive" role="img">
</i> 
<span class="menu-text">Archive</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Mesa Lessons</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Oren Bochman </p>
            </div>
    </div>
      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#seperating-the-environment-from-the-agents" id="toc-seperating-the-environment-from-the-agents" class="nav-link active" data-scroll-target="#seperating-the-environment-from-the-agents">Seperating the environment from the agents</a></li>
  <li><a href="#encapsulating-rules-in-classes" id="toc-encapsulating-rules-in-classes" class="nav-link" data-scroll-target="#encapsulating-rules-in-classes">Encapsulating rules in classes</a></li>
  <li><a href="#makeing-sugrscape-more-dynamic" id="toc-makeing-sugrscape-more-dynamic" class="nav-link" data-scroll-target="#makeing-sugrscape-more-dynamic">Makeing sugrscape more dynamic</a>
  <ul class="collapse">
  <li><a href="#dynamic-rules---swapping-rules-during-the-simulation" id="toc-dynamic-rules---swapping-rules-during-the-simulation" class="nav-link" data-scroll-target="#dynamic-rules---swapping-rules-during-the-simulation">Dynamic rules - swapping rules during the simulation</a></li>
  <li><a href="#evolution-based-on-fitness-and-reproduction" id="toc-evolution-based-on-fitness-and-reproduction" class="nav-link" data-scroll-target="#evolution-based-on-fitness-and-reproduction">Evolution based on fitness and reproduction</a></li>
  <li><a href="#private-information-and-coalitions" id="toc-private-information-and-coalitions" class="nav-link" data-scroll-target="#private-information-and-coalitions">Private information and coalitions</a></li>
  <li><a href="#learning-and-reinforcement-learning" id="toc-learning-and-reinforcement-learning" class="nav-link" data-scroll-target="#learning-and-reinforcement-learning">Learning and reinforcement learning</a></li>
  <li><a href="#second-order-effects---linking-rules" id="toc-second-order-effects---linking-rules" class="nav-link" data-scroll-target="#second-order-effects---linking-rules">Second order effects - linking rules</a></li>
  </ul></li>
  <li><a href="#pheromone-signaling" id="toc-pheromone-signaling" class="nav-link" data-scroll-target="#pheromone-signaling">Pheromone Signaling:</a></li>
  <li><a href="#the-sugarscape-trade-rule-issues" id="toc-the-sugarscape-trade-rule-issues" class="nav-link" data-scroll-target="#the-sugarscape-trade-rule-issues">The SugarScape Trade rule issues</a></li>
  <li><a href="#better-trade-rules" id="toc-better-trade-rules" class="nav-link" data-scroll-target="#better-trade-rules">Better trade rules:</a>
  <ul class="collapse">
  <li><a href="#arbitraders" id="toc-arbitraders" class="nav-link" data-scroll-target="#arbitraders">Arbitraders</a></li>
  <li><a href="#supertraders" id="toc-supertraders" class="nav-link" data-scroll-target="#supertraders">Supertraders</a></li>
  <li><a href="#edgworth-box-with-pareto-efficent-trades-maximising-utility-objective" id="toc-edgworth-box-with-pareto-efficent-trades-maximising-utility-objective" class="nav-link" data-scroll-target="#edgworth-box-with-pareto-efficent-trades-maximising-utility-objective">Edgworth box with pareto-efficent trades maximising utility objective</a></li>
  <li><a href="#edgworth-box-with-pareto-efficent-trades-for-survivability-objective" id="toc-edgworth-box-with-pareto-efficent-trades-for-survivability-objective" class="nav-link" data-scroll-target="#edgworth-box-with-pareto-efficent-trades-for-survivability-objective">Edgworth box with pareto-efficent trades for survivability objective</a></li>
  <li><a href="#edgworth-box-with-pareto-efficent-trades-for-hybrid-objective" id="toc-edgworth-box-with-pareto-efficent-trades-for-hybrid-objective" class="nav-link" data-scroll-target="#edgworth-box-with-pareto-efficent-trades-for-hybrid-objective">Edgworth box with pareto-efficent trades for hybrid objective</a></li>
  </ul></li>
  <li><a href="#gale-shapley-trade-partner-allocation" id="toc-gale-shapley-trade-partner-allocation" class="nav-link" data-scroll-target="#gale-shapley-trade-partner-allocation">Gale-Shapley Trade partner allocation</a></li>
  <li><a href="#median-approximate-solution-to-the-stable-trade-partner-lattice-simplex" id="toc-median-approximate-solution-to-the-stable-trade-partner-lattice-simplex" class="nav-link" data-scroll-target="#median-approximate-solution-to-the-stable-trade-partner-lattice-simplex">Median approximate solution to the stable trade partner lattice simplex</a></li>
  <li><a href="#better-trades" id="toc-better-trades" class="nav-link" data-scroll-target="#better-trades">Better trades ?</a></li>
  <li><a href="#emergence-in-abm" id="toc-emergence-in-abm" class="nav-link" data-scroll-target="#emergence-in-abm">Emergence in ABM</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>Implementing Sugarscape has some interesting lessons.</p>
<p>In this post I’d like to cover engineering the simulation.</p>
<section id="seperating-the-environment-from-the-agents" class="level2">
<h2 class="anchored" data-anchor-id="seperating-the-environment-from-the-agents">Seperating the environment from the agents</h2>
<p>Mesa is a great tool for ABM but it has some limitations. One of these is that the reporting mechanism tries to get the same data from all agents. The way Sugarscape is implemented is that there are agents for sugar, spice and pollution as well as different actors. This makes it impractical to get a single data frame for all agents. This assumption is also carried over to the visualization code so that it is not a simple fix. Another problem with this approach it increases the number of agents in proportion to the size of the simulation.</p>
<p>For example for a 50x50 grid we have 2500 agents. If we have 2 resources and pollution which also requires tracking pollution flux and two iterations to perform the diffusion. Python isn’t particularly fast since it is interpreted and adding all this overhead makes the simulation slow. Also I wanted to also test some ideas with more resources which would require a larger grid.</p>
<p>One way to reduce the number of agents is to have a single patch agent type that can handle resources and pollution - which had been implemented in the Sugarscape with traders sample. This still means most agent are patches and makes agent’s code more complex. Data processing becomes flaky and there are not samples or documentation to help out.</p>
<p>What this led me to do is to make a clearer separation between the environment and the agents. I migrated the resource code into the grid which had the added bonus of making agents simpler.</p>
</section>
<section id="encapsulating-rules-in-classes" class="level2">
<h2 class="anchored" data-anchor-id="encapsulating-rules-in-classes">Encapsulating rules in classes</h2>
<p>A second idea issue that arises when trying to implement Sugarscape is the keeping track of the code belonging to each rule. And a second facet for this is to be able to support different variants of the rules. E.g constant growth, full growth, seasonal growth. This got me thinking about using a strategy pattern and then the agent delegating the rule’s behavior to the rule. THis is perhaps not the most elegant solution - but it does have a number of advantages.</p>
<ol type="1">
<li>it allows one to define an api for the model and agent step.</li>
<li>it allows one to easily swap out rules and test different variants.</li>
<li>it allows one to easily extend the rules by inheriting from the base rule class.</li>
<li>it allows one to store data collection and visualization code in the rule along size the code that generates the data. This is made simpler by also using the builder pattern to construct the data collector.</li>
<li>it also easy to add two functions to support rules’ initialization, at the model and agent levels</li>
<li>these can be expanded with a update model and agent state operation that facilitates controlling the simulation from a ui at run time - another big advantage of the strategy pattern.</li>
</ol>
</section>
<section id="makeing-sugrscape-more-dynamic" class="level2">
<h2 class="anchored" data-anchor-id="makeing-sugrscape-more-dynamic">Makeing sugrscape more dynamic</h2>
<p>There are a number of ways to make Sugerscape more dynamic.</p>
<section id="dynamic-rules---swapping-rules-during-the-simulation" class="level3">
<h3 class="anchored" data-anchor-id="dynamic-rules---swapping-rules-during-the-simulation">Dynamic rules - swapping rules during the simulation</h3>
<p>One way is to swap rules in the middle of the simulation as the book frequently does. The simple way to do this is use an array of rules which specific the rules in use. This is frequently used in the book which generaly used three or four rules in most cases.</p>
</section>
<section id="evolution-based-on-fitness-and-reproduction" class="level3">
<h3 class="anchored" data-anchor-id="evolution-based-on-fitness-and-reproduction">Evolution based on fitness and reproduction</h3>
<p>This concept is not fully implemented in the book but at least two aspects are inherent in the simulation</p>
<ol type="1">
<li>selection weeds out less fit agents</li>
<li>sexual reproduction allows for the creation of new agents with a mix of the parents’ traits.</li>
</ol>
<p>what the authors did not include are</p>
<ol type="1">
<li><p>mutation</p></li>
<li><p>differential reproduction based on fitness</p></li>
<li><p>a fitness function - based on the expected progeny of an agent.</p></li>
<li><p>This can be based recusively by a linear model of intrinsics like high vision and low metabolism a smaller initial endowment the total amount of resources an agent has collected thier age the number of progeny they have - and the thier fitness.</p></li>
</ol>
<p>the amount of resources an agent has.</p>
</section>
<section id="private-information-and-coalitions" class="level3">
<h3 class="anchored" data-anchor-id="private-information-and-coalitions">Private information and coalitions</h3>
<p>Agents do not have private information.</p>
<p>The agents form coalitions through culture but these are not used in any social sense nor for optimizing behaviour.</p>
<p>Adding private information can make trade more realistic. Adding private opens the door to construction of bayesian agents that can estimate the private information of other agents based on watching thier actions.</p>
<p>Establishing coalitions can be used to coordinate activities in ways that are optimal for the group and possibly over come the social dilemmas that arise in the simulation like the problems posed by pollution.</p>
<p>Private information and coalitions can be used to implement more realistic trade rules. These could be rudimentary versions of cooperative and companies but could also lead to a form of goverment.</p>
</section>
<section id="learning-and-reinforcement-learning" class="level3">
<h3 class="anchored" data-anchor-id="learning-and-reinforcement-learning">Learning and reinforcement learning</h3>
<p>Learning and reinforcement learning</p>
<p>This idea is already inhernet in of the sugarscape pardigm. IT basicaly involves adding a fitness function to the agents and then selecting the best agents to reproduce. The book uses a simple fitness function based on the amount of resources an agent has. This can be extended to include other factors such as pollution, trade, combat, and culture.</p>
<ol start="2" type="1">
<li>More challenging and beyond the scope of what is discussed in the book are scenarios where we test different rule variants during a single run. For example we can use a variant of culture that turns combat/trade rule on or off for agents with culture rule c_1 but other agents can have trade and combat on or of controlled by sex - i.e.&nbsp;at birth. This can let us study highly dynamic version of hawk dove game from game theory in simulations before we analyze it mathematically.</li>
<li>Agent having private information, and forming coalitions. Both concepts are discussed in to text but not implemented. The first in the context of more realistic trade rules. The latter in the context of paying agents to reduce harvesting to avoid pollution.</li>
<li>Even more dynamic is granting agents the ability to learn optimal behavior and take charge of their actions which also involves adding reinforcement learning to the model. This is already extant in Sugarscape through selection and reproduction but adding RL add a much greater level of dynamism to the model. Note also that this is a different behavioural paradigm from the one used in the book and requires some deeper thinking on hot to implement it. (What are the limits on experience for agent learning - do they only have thier last state, thier full sim’s history, all thier past lives, every past life. What about being taught by their parents at some cost or rate of transmision. Basicaly what is the minimal experience to get to pareto optimality on a set of rules.)</li>
</ol>
<p>The problem of using an array is that some of the logic for action in the book have constraints on order. e.g.&nbsp;agents move, harvest, pollute, eat pollute again, perhaps die die if they are out of resources trade reproduce etc and then die of old age and pass of thier inheritance. This is a lot of steps for only some of the rules and and the order is important in some cases.</p>
<p>More challanging and beyond the scope of what is discussed in the book are scenarios where we test different rule variants during a single run. For example we can use a variant of culture that turns combant rule on or off for agents Alson side agent that have combat on or off permamently.</p>
<p>Even more intersting is granting agents the ability to learn optimal behavior and take charge of thier actions which also involves adding reinforcement learning to the model.</p>
<p>A third</p>
<p>This becomes a problem when we want to test different variants of the rules or change rules during the simulation. My approach to this is to to encapsulate each rule in a class this also makes it much simpler to extend simple rules using inheriatance.</p>
<p>The next idea was to make each rule also take charge of it’s own data collection and visualization. Again this makes it easier to extend the rules and to keep track of the data.</p>
</section>
<section id="second-order-effects---linking-rules" class="level3">
<h3 class="anchored" data-anchor-id="second-order-effects---linking-rules">Second order effects - linking rules</h3>
<p>Following Schelling segregation model, Sugarscape is a model of social activity that emerges from simple rules. One of the key ideas in the development of the sugarscape model is the reductionsit study of how a social activity like segregation can emerge from a simple rule. Many aspects of a society are considered in the book yet many others are not.</p>
<p>However it would seem that the next step in a reductionist study of society would be to consider how different rules interact with each other. The book does consider many such cases - most simulations cobine just a few rules. This is not done in the book.</p>
<p>from hetrogineity interacting with simple rules. THe One of the things that is not done in the book is to link the rules. For example</p>
<p>The next Idea I had to handle this is to move the environment to the grid. This has a few implications</p>
<ol type="1">
<li>we need to override the grid.</li>
<li>agents need to access the grid during the simulation.</li>
<li>the environment will need to activate the resource growth and pollution diffusion.</li>
</ol>
<p>However, this seems to be a good way to separate the environment from the agents and indeed the agent code get a little bit simpler in when it comes to harvesting.</p>
<p>We also have a sigle type of agent allowing the data collection to proceed in the way mesa is designed.</p>
<p>It is now possible to replace Multigrid with SingleGrid. - This quickly uncovered a bug in the agent creation code. It does not check if a new agent’s position is already occupied. - The following fixes this issue.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pos <span class="op">=</span> <span class="va">self</span>.random.choice(<span class="va">self</span>.grid.select_cells(only_empty<span class="op">=</span><span class="va">True</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I want some help in coding Sugarscape pollution diffusion rule using mesa’s new add_property_layer</p>
<p>I have written the following code:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> ResourceGrid(SingleGrid):</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, width, height, torus):</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().<span class="fu">__init__</span>(width, height, torus)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Initialize each cell with resource attributes</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>        sugar_distribution <span class="op">=</span> np.genfromtxt(Path(<span class="va">__file__</span>).parent <span class="op">/</span> <span class="st">"sugar-map.txt"</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>        spice_distribution <span class="op">=</span> np.flip(sugar_distribution, <span class="dv">1</span>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>        <span class="co">#elevation = PropertyLayer("elevation", width, height, default_value=0)</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>        max_sugar <span class="op">=</span> PropertyLayer(<span class="st">'max_sugar'</span>,width,height,sugar_distribution)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>        sugar <span class="op">=</span> PropertyLayer(<span class="st">'sugar'</span>,width,height,sugar_distribution)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>        max_spice <span class="op">=</span> PropertyLayer(<span class="st">'max_spice'</span>,width,height,spice_distribution)        </span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>        spice <span class="op">=</span> PropertyLayer(<span class="st">'spice'</span>,width,height,spice_distribution)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>        pollution_flux <span class="op">=</span> PropertyLayer(<span class="st">'pollution_flux'</span>,width,height,default_value<span class="op">=</span><span class="fl">0.0</span>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>        pollution <span class="op">=</span> PropertyLayer(<span class="st">'pollution'</span>,width,height,default_value<span class="op">=</span><span class="fl">0.0</span>)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>        <span class="co">#self.add_property_layer(elevation )</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.add_property_layer(max_sugar)</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.add_property_layer(max_spice)</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.add_property_layer(sugar)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.add_property_layer(spice)</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.add_property_layer(pollution_flux)</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.add_property_layer(pollution)</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> get_resource(<span class="va">self</span>, x,y, key<span class="op">=</span><span class="st">'sugar'</span>):        </span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.properties[key].data[x,y]</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> set_resource(<span class="va">self</span>, x,y, amount,key<span class="op">=</span><span class="st">'sugar'</span>):        </span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.properties[key].set_cell((x,y),amount)</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> get_resources(<span class="va">self</span>, pos, key<span class="op">=</span><span class="st">'sugar'</span>):        </span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.properties[key].data[pos[<span class="dv">0</span>],pos[<span class="dv">1</span>]]</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> step(<span class="va">self</span>, sugar_growth_rate<span class="op">=</span><span class="dv">1</span>, spice_growth_rate<span class="op">=</span><span class="dv">1</span>, pollution_decay_rate<span class="op">=</span><span class="fl">1.0</span>):   </span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>        <span class="co"># growback can be done without a loop using a lambda.</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.properties[<span class="st">'sugar'</span>].modify_cells(np.add,sugar_growth_rate)</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.properties[<span class="st">'sugar'</span>].modify_cells(np.fmin,<span class="va">self</span>.properties[<span class="st">'max_sugar'</span>].data)</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.properties[<span class="st">'spice'</span>].modify_cells(np.add,spice_growth_rate)</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.properties[<span class="st">'spice'</span>].modify_cells(np.fmin,<span class="va">self</span>.properties[<span class="st">'max_spice'</span>].data)</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>           <span class="kw">def</span> step(<span class="va">self</span>, sugar_growth_rate<span class="op">=</span><span class="dv">1</span>, spice_growth_rate<span class="op">=</span><span class="dv">1</span>, pollution_decay_rate<span class="op">=</span><span class="fl">1.0</span>):   </span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>        <span class="co"># growback can be done without a loop using a lambda.</span></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.properties[<span class="st">'sugar'</span>].modify_cells(np.add,sugar_growth_rate)</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.properties[<span class="st">'sugar'</span>].modify_cells(np.fmin,<span class="va">self</span>.properties[<span class="st">'max_sugar'</span>].data)</span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.properties[<span class="st">'spice'</span>].modify_cells(np.add,spice_growth_rate)</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.properties[<span class="st">'spice'</span>].modify_cells(np.fmin,<span class="va">self</span>.properties[<span class="st">'max_spice'</span>].data)</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.properties[<span class="st">'pollution_flux'</span>].modify_cells(np.multiply,pollution_decay_rate)</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.properties[<span class="st">'pollution'</span>].data<span class="op">=</span> <span class="va">self</span>.properties[<span class="st">'pollution_flux'</span>].data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note: the diffusion rule should: 1. update the pollution_flux using the mean pollution from the adjacent cells 2. apply the pollution_decay_rate to the flux 3. update the pollution from the flux</p>
<p>Some more ideas.</p>
<p>As I went on improving the design of my sugarscape simulaition I came across.</p>
<p>There are many variants on even the most basic rule.</p>
<p>The motion rule:</p>
<ol type="1">
<li><p>the ability to go to any of the maximal sugar points in the field of view creates a nomadic type of individual.</p></li>
<li><p>there was a bug in mesa’s randomization which led to near cyclic motion for agents at the edge of the sugar contours. Periodic motion is a form of teratorilaism which could be good for avoiding desiases and may make it easier to mate with other nearby teritorial agents. The idea here is to implement an exploter agent that prefers to go and exploit places it visted before if they are maximal. This can lead to near periodic motion. Is this a form of chaos. Also we may give it a epsilon chance to explore which may let it discover nearby maxima.</p></li>
<li><p>A friend suggested letting agents leave phenome tracks. These can form the basis of a signaling system.</p>
<ul>
<li>The first signal is a phenome trail from distant maximum sugar/spice zones.</li>
<li>The second might indicate where a viable mates might be found. Since i’m interested in adding basic and complex singaling sytems to ABM these can be intersting to implemnt using new resource layers.</li>
</ul></li>
<li><p>Boids/Flocking motion.</p></li>
<li><p>Fire fighthing - go the the hottest safe spot and put out the fire.</p></li>
<li><p>Pollution cleaners - go to highest safe pollution and clean up.</p></li>
<li><p>A missonary might go to pockets of counter culture to switch them over. This might work better if the culture had memory based on age. I.e. a binomial with a,b where a is the time steps it was 0 and b the time steps it was one. making it harder to convert you and increasing the chance you flip back. More generaly an urn model is even more genral.</p>
<p>These can be used to comunicate</p></li>
<li></li>
</ol>
</section>
</section>
<section id="pheromone-signaling" class="level2">
<h2 class="anchored" data-anchor-id="pheromone-signaling">Pheromone Signaling:</h2>
<p>if agents can signal using a pheromene trail they could lay a path from higher levels of resources to a nest…. (there might be unique pheromones for each resource or a more complex signal using combination of multiple pheromenes to encode each resource) a weak diffusion rule would create a gradient to lead to the agent or to the resource.</p>
</section>
<section id="the-sugarscape-trade-rule-issues" class="level2">
<h2 class="anchored" data-anchor-id="the-sugarscape-trade-rule-issues">The SugarScape Trade rule issues</h2>
<ol type="1">
<li>the rule is unfair.</li>
</ol>
<ul>
<li><p>While the Edgeworth box has pareto-efficent solutions where indifference curves are at a tangent and therefore the MRS which corresponding to prices for trade are in agreement. Also there is only one such point for each pair of curves if they have a common point. Also there is one point where both utilities are highest. This seems to be the best trade to consider.</p>
<p>The trade algorithms uses points where the two curves intersect not tangents. However each indiffence curve probably intersect with all the other traders curves. Some may have more curves in the box (their utility levels are packed closer) Others less. Without some mechanism to sort these out we cant be certain that bragaining steps are sensible. The problem is that agents are not realy indiffernt to all the combinatino of sugar and spice - at least in the sense that under a certain amount of sugar or spice they will be wealthy on paper but likely starve in the next time step. The algorithm leads to more on diagonal solutions but what if I am very sugar rich. I may trade 1/N of my excess sufar with each nighbour for one unit of spice. But one unit of spice from each may mean they have less then thier metabolism and they will starve before they can makr a trade or harvest ay spice.</p>
<p>One agent may have more viable cuves than the other. idealy we should be picking two curves with similar utiltiy levels…. The intersection points can represent radicaly different pricing levels, particularly for an agent with a highly imballnced endowment. The pareto point leads to a point where both MRS are equal and the resulting endowments are better.</p>
<p>But we don’t really consider which points on the current curve to use. Each intersection corresponds to different utility level for our trading partner. It seem the intersection closest to the diagonal is best for our partner but we seem to be picking the one which is furthest - most likely to be the worst for them - possibly starving them.</p>
<p>So on this issue we should pick a point on the indiffeerence curve that at a utility level that at least won’t starve out trade partner or ourseves.</p>
<p>This mean clipping the indiffernce curves at the metabolic minimum.</p></li>
<li><p>there is no mony and trades are in integral units and detrmine the trade amount</p></li>
<li><p>the trade amount are unfair because the prices are unfair and because one side is pegged to 1.</p></li>
<li><p>All this is moot if the alg can reach the same pareto optimal solution by small steps. But I think that its unlikely. In the trade because the steps are integral and one side is pegged to one there are roundoff errors. With every trade some value is lost (on one or both sides).</p>
<ul>
<li>after each both sides are reevaluated reducing the price as well and the price drops so that the more needy agent will less willing or able to make all the trades it needs to make to get the the pareto point. And they may now be approximating different pareto point.</li>
</ul></li>
<li><p>Both agents agent who participite in trade could be better off if allowed to pick<br>
their preffered trade partner.</p></li>
<li><p>perhaps in view of this agents should be allowed to refuse unless they get a better deal. This suggest looking at stable marriage alg. where prior to trade the are serveral rounds in each neighbourhood for matching traders.</p></li>
</ul>
<ol start="2" type="1">
<li>trade is inefficent.</li>
</ol>
<ul>
<li>trade always use 1 unit for one of the agents.</li>
<li>to trade 3 for 3 3 trades are needed.</li>
</ul>
<ol start="3" type="1">
<li>trade increases utulity but can make an agent worse off.</li>
</ol>
<ul>
<li>after a trade a fertile agent can become wealthier but infertile if they are reduced below a multiple of thier endowment.</li>
<li>after a trade an agent can be wealthier in utility but not in survivability so they may have an extra unit of sugar they don’t need but not enogh spice so they might starve.</li>
</ul>
<ol start="4" type="1">
<li>agents that have participate in tradetraded will generaly</li>
<li>a smarter agent who can pick his trade partners and thier order can do them some damage</li>
</ol>
</section>
<section id="better-trade-rules" class="level2">
<h2 class="anchored" data-anchor-id="better-trade-rules">Better trade rules:</h2>
<p>A fundumental question is this:</p>
<p>If localy markets are hertogenious and weakly ineracting can we be sure of the globall market reaching an reaching an equilibrium between supply and demand? It there are many possible equilibiria how long to reach one and if not what other can we say for the long term, i.e.&nbsp;is there a local and global steady state where supply and demand meet or can we have other outcomes like periodic, chaotic, and random states globably.</p>
<ul>
<li><p>How long until will prices reflect the equilibrium of global supply and demand ?</p></li>
<li><p>If the market is out of equilibrium does it mean that an agent with a good estimate of the true equilibrium price can trade or use arbitrage to benefit from this state?</p></li>
<li><p>Is the trade rule realy inefficnet ?</p></li>
<li><p>Can a better trade rules</p>
<ul>
<li>let prices reach equilibrium prices</li>
<li>increase trade amounts</li>
<li>increase overall welfare and</li>
<li>reduce welfare inequality</li>
</ul></li>
<li><p>What is in the way of equilibrium formation ?</p>
<ul>
<li>is it lack of information</li>
<li>inability or inefficency of making tades accross market boundries</li>
<li>not enough trades within markets for them to reach equilibria?
<ul>
<li>will it help if there are multiple rounds of trades for all agents.</li>
</ul></li>
</ul></li>
</ul>
<p>The down side of a inefficent trade rule is that it may lead to less efficent market. The market in SC can be viewd as localy fragmented or if there are enough agents it may be a collection of weakly interacting markets.</p>
<p>Intuitively</p>
<p>Agents with lower vision tend to persist at the local market edges and beocome inefficent conduits of trade in the trade network instead of finding strategic locations where they could maximize the benefit of arbitrage between local markets.</p>
<section id="arbitraders" class="level3">
<h3 class="anchored" data-anchor-id="arbitraders">Arbitraders</h3>
<p>We can explore this by letting some agents who are less efficent harvesters have a movement rule that lets them seek out such locations with maximal arbitrage option. If there landscape is made of K blobs of different resources there may be greater need for such traders, and As more regions</p>
</section>
<section id="supertraders" class="level3">
<h3 class="anchored" data-anchor-id="supertraders">Supertraders</h3>
<p>We can setup a supertrader that is basicalt a supermarket in each neighbourhood. These agents with better vision that dont have a metablism cost or harvesting step.</p>
<p>They can see each other and trade with each other allowing for greater efficency in the market.</p>
<p>WE can rerun markets with or without supertraders and with supertraders with more vision. Thier wealth distribution could be a way to track the lost benefits due to vision fragmentation.</p>
</section>
<section id="edgworth-box-with-pareto-efficent-trades-maximising-utility-objective" class="level3">
<h3 class="anchored" data-anchor-id="edgworth-box-with-pareto-efficent-trades-maximising-utility-objective">Edgworth box with pareto-efficent trades maximising utility objective</h3>
<ol start="0" type="1">
<li>neighbours := agents in field of visions</li>
<li>for each neighbour in neighbours:</li>
</ol>
<ol type="a">
<li>setup the edgeworth box with</li>
<li>store the pareto-optimal solution that maximises both agents’ utilities and is viable for both agents</li>
<li>do the trade with the highest gain in utility to me.</li>
<li>remove agent from neighbours</li>
<li>my prefrences have changed so return to 1</li>
</ol>
</section>
<section id="edgworth-box-with-pareto-efficent-trades-for-survivability-objective" class="level3">
<h3 class="anchored" data-anchor-id="edgworth-box-with-pareto-efficent-trades-for-survivability-objective">Edgworth box with pareto-efficent trades for survivability objective</h3>
<p>we want to restric solutions to trades that increase the survivability this is like a quantum contraint on the utility.</p>
<ol type="1">
<li>are the any solutions ?</li>
<li>what is the best solution - and what is the closest option.</li>
</ol>
</section>
<section id="edgworth-box-with-pareto-efficent-trades-for-hybrid-objective" class="level3">
<h3 class="anchored" data-anchor-id="edgworth-box-with-pareto-efficent-trades-for-hybrid-objective">Edgworth box with pareto-efficent trades for hybrid objective</h3>
<ol type="1">
<li>we want a multiterm utility for</li>
<li>survivability of n rounds Quant(U(M))</li>
<li>reproduction endowments for up to 4 offsprings U(E)</li>
<li>trades for U(M) that do not reduce the above two utility componenets</li>
<li>side trades that reduce pollutions ?</li>
</ol>
<p>the tricky part here is to define an hybrid utlities and solve its edgworth box as we add more rules we arrive at more complex utilities.</p>
<p>So we may need to rethink a simlpler way to find accaptable trades….</p>
</section>
</section>
<section id="gale-shapley-trade-partner-allocation" class="level2">
<h2 class="anchored" data-anchor-id="gale-shapley-trade-partner-allocation">Gale-Shapley Trade partner allocation</h2>
<p>A second idea - based on Gale–Shapley algorithm for Stable marriage within neighborhoods</p>
<ol type="1">
<li>Each agent should find their preferred trades within thier FOV.</li>
</ol>
</section>
<section id="median-approximate-solution-to-the-stable-trade-partner-lattice-simplex" class="level2">
<h2 class="anchored" data-anchor-id="median-approximate-solution-to-the-stable-trade-partner-lattice-simplex">Median approximate solution to the stable trade partner lattice simplex</h2>
<p>GS alg is best for one side (proposers or acceptors) Can we find a variant that leads to a median graph ?</p>
<p>This seems very hard to do.</p>
<p>The originals GS alg considers all marriages within the population. Here I want and trade alg in which optimal trades emerge in the the median point on the trader’s marriage simplex.</p>
<p>For this variant for ABM we want to impose two restrictions on marriages: 1. offers made are restricted by miopia to the agents FOV. 2. offers received are restricted localy to the agents Max_Vision FOV.</p>
<p>we should iterate over all agents once to so all</p>
<p>, yet if all agents get to play both roles per round then it should cancel out the proposer advantage and give a median solution!</p>
</section>
<section id="better-trades" class="level2">
<h2 class="anchored" data-anchor-id="better-trades">Better trades ?</h2>
<p>Lessons from the history of the East India Company suggest that if agents can form temporary trading companies they may be able to trade more efficiently.</p>
<p>Different forms of companies can be tested to see which maximally parsimonious structure emerge as most realistic while local and need minimal computation:</p>
<ol type="1">
<li><p>A set of Agent contributes (resources) or money to partnership at some price becoming an share owner of this company.</p></li>
<li><p>agents can be silent partners of active members acting on behalf of company</p></li>
<li><p>providing information on market conditions, supply, (by agent and on ground) demand, prices.</p></li>
<li><p>Getting and receiving trade offers.</p></li>
<li><p>Making localized decisions on behalf of the company (possibly subject to share majority in a neighborhood)</p></li>
<li><p>Once the company has traded agents can contribute/withdraw resources with ownership adjustments</p></li>
<li><p>the company can be dissolved after n-time steps, if enough agents migrate, or if the inventory is too low</p></li>
<li><p>The partnership has no Metabolism so it will need a different utility function - (this can be ml based based on info from agents).</p></li>
<li><p>members of a company may use an information utility to deploy to locations that maximize information….</p></li>
<li><p>will agents have shares in multiple companies. (perhaps conflict of interest can force agent to be a silent partner in the coorporation)</p></li>
<li><p>can agents get rewards for bringing in trades</p></li>
<li><p>can agents get loans from companies</p></li>
<li><p>will comparative advantage let certain agent gain control of such companies</p></li>
</ol>
<p>Owners can cash out individuals or other</p>
</section>
<section id="emergence-in-abm" class="level2">
<h2 class="anchored" data-anchor-id="emergence-in-abm">Emergence in ABM</h2>
<p>If we consider lessons in thinking for ABM here are some guidelines:</p>
<p>Let us consider some effect we wish to study, say segregation.</p>
<ol type="1">
<li>We need to have a metric which we can measure the effect in our world.</li>
<li>We want to find a maximally parsimonious rule for which the effect emerges</li>
</ol>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{bochman,
  author = {Bochman, Oren},
  title = {Mesa {Lessons}},
  url = {https://orenbochman.github.io//posts/2024/2024-3-31-sugarscapes/mesa-lessons.html},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-bochman" class="csl-entry quarto-appendix-citeas" role="listitem">
Bochman, Oren. n.d. <span>“Mesa Lessons.”</span> <a href="https://orenbochman.github.io//posts/2024/2024-3-31-sugarscapes/mesa-lessons.html">https://orenbochman.github.io//posts/2024/2024-3-31-sugarscapes/mesa-lessons.html</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("^(?:http:|https:)\/\/www\.quarto\.org\/custom");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="OrenBochman/blogComments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 Copyright 2024, Oren Bochman
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../../about.html">
<p>About</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../../license.html">
<p>License</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../../trademark.html">
<p>Trademark</p>
</a>
  </li>  
</ul>
    <div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




<script src="../../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>